<!doctype html>
<!--[if lt IE 7 ]> <html class="ie6 no-flexbox"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7 no-flexbox"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8 no-flexbox"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9 no-flexbox"> <![endif]-->
<!--[if IE 10 ]>    <html class="ie10 no-flexbox"> <![endif]-->
<!--[if (gt IE 10)|!(IE)]><!--> <html class="modern wf-loading" lang="en"> <!--<![endif]-->
  <head>
  <script>
    var searchDomain = 'https://developer.okta.com';
    var isProduction = window.location.hostname === 'developer.okta.com';
    if (isProduction) {
      // TypeKit
      (function(d) {
        var config = {
          kitId: 'jff5neq',
          scriptTimeout: 3000,
          async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/bwf-loadingb/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);

      // Google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15777010-3', 'auto');
      ga('send', 'pageview');

      // START Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TJ45R6');
      // END Google Tag Manager

      // Start Heap Analytics
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
      heap.load("3356162945");
      // End Heap Analytics
    }
  </script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   

  <link type="text/css" rel="stylesheet" href="https://developer.okta.com/sites/all/themes/developer/css/master.css" media="all" />
  <meta class="swiftype" name="title" data-type="string" content="Token Authentication in ASP.NET Core 2.0 - A Complete Guide | Okta Developer">
  <meta class="swiftype" name="summary" data-type="string" content="Everything you ever wanted to know about token authentication in ASP.NET Core 2.0 and beyond." />

  <link type="text/css" rel="stylesheet" href="/assets/animate-ec43d72c3ed45e08a460b8a2966d8dba6006aebfa0530935c3973fa493a8771f.css">
  <link type="text/css" rel="stylesheet" href="/assets/okta-980d465fb01d9d9034e5f18bb97a17688f56aa81d5c69f457f546c9a00acc358.css">
  
  
  <title>Token Authentication in ASP.NET Core 2.0 - A Complete Guide | Okta Developer</title>
  <meta name="description" content="Everything you ever wanted to know about token authentication in ASP.NET Core 2.0 and beyond.">
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="https://developer.okta.com/feed.xml"><!-- GA -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon/manifest.json">
  <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#21313a">
  <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
</head>

  
    <body id="blog">
	




<header class="Header is-fixed">

  <div class="Wrap">

    <a class="Logo" href="https://developer.okta.com">
      <svg version="1.1" id="OktaLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 431.9 151.4" style="enable-background:new 0 0 431.9 151.4;" xml:space="preserve"><g><g><g><path d="M102.2,41.4c-21,0-38.1,17.1-38.1,38.1s17.1,38.1,38.1,38.1s38.1-17.1,38.1-38.1l0,0C140.3,58.5,123.2,41.4,102.2,41.4z M102.2,98.5c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19c0.1,10.5-8.4,19-18.9,19.1C102.3,98.6,102.2,98.6,102.2,98.5L102.2,98.5z"/><path d="M169.1,92.3c0-1.9,1.5-3.4,3.4-3.4c0.9,0,1.8,0.4,2.4,1c9.5,9.7,25.3,26.3,25.4,26.4c0.4,0.5,0.8,0.8,1.4,0.9l1.6,0.2h17.2c1.8,0,3.3-1.4,3.4-3.2c0-0.8-0.3-1.5-0.8-2.2l-28.6-29.2l-1.5-1.5c-3.2-3.9-2.9-5.4,0.8-9.3l22.6-25.1c1.1-1.4,0.8-3.5-0.6-4.6c-0.6-0.4-1.3-0.7-2-0.7h-17c-0.6,0.2-1.1,0.5-1.5,0.9L175,64.4c-1.3,1.4-3.4,1.5-4.8,0.2c-0.7-0.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3c-0.1,0-0.2,0-0.3,0h-12.7c-2.2,0-3.3,1.5-3.3,2.8v95.8c0,2.2,1.8,2.8,3.3,2.8h12.7c1.7,0.1,3.2-1.2,3.3-2.9c0,0,0,0,0,0V92.3z"/><path d="M273,114l-1.4-12.8c-0.2-1.7-1.7-2.9-3.4-2.7c0,0,0,0-0.1,0l-2.9,0.2c-10.1,0-18.5-7.9-19-18c0-0.3,0-0.7,0-1V64.2c-0.1-2,1.5-3.6,3.5-3.7c0,0,0,0,0,0h17c1.7-0.1,3.1-1.5,3-3.2c0,0,0-0.1,0-0.1v-12c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9,0.1-3.5-1.5-3.6-3.4c0,0,0,0,0,0V18.9c-0.1-1.7-1.5-3.1-3.2-3c0,0-0.1,0-0.1,0h-12.7c-1.6-0.1-3,1.1-3.1,2.7c0,0.1,0,0.1,0,0.2c0,0,0,61.7,0,62c0.5,21,17.9,37.6,38.9,37c1.4,0,2.9-0.2,4.3-0.3C272,117.2,273.2,115.7,273,114z"/></g><path d="M364.7,98c-10.8,0-12.4-3.8-12.4-18.3l0,0V44.8c0-1.8-1.4-3.2-3.2-3.2c0,0-0.1,0-0.1,0h-12.8c-1.8,0-3.2,1.4-3.3,3.2v1.6C314.6,36,291.3,42.5,281,60.8c-10.4,18.3-3.9,41.6,14.4,51.9c14,7.9,31.4,6.2,43.5-4.2c3.6,5.5,9.3,9.1,18.3,9.1c1.5,0,9.7,0.3,9.7-3.5v-13.6C367,99.2,366,98.1,364.7,98z M314.2,98.6c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19l0,0C333.2,90.1,324.7,98.6,314.2,98.6z"/></g><path d="M19.4,74c2.2-1.9,4.1-4.1,5.7-6.6c3.5-5.3,5.4-11.5,5.2-17.9V27c0-4.9,0.9-8.4,2.7-10.5c1.8-2.1,4.8-3,9.2-3h12.6c1.2,0,2.1-0.9,2.2-2.1l0,0V2.2C57,1,56,0,54.8,0c0,0,0,0,0,0H41.5c-7.8,0-12.9,2.1-18,7.6s-7.1,12.3-7.1,21.7v14.2c0,2.2-0.1,4-0.2,5.7v2.2c-0.5,3.2-1.8,6.2-3.6,8.9C9.4,64.7,5.1,70.9,0.9,74l0,0l-0.3,0.3l0,0l-0.2,0.3H0.2v0.3l0,0c-0.1,0.3-0.1,0.7,0,1l0,0v0.3h0.1l0.2,0.3l0,0l0.3,0.3l0,0c4.2,3.1,8.5,9.3,11.3,13.7c1.8,2.7,3.1,5.7,3.6,8.9v2.2c0.1,1.6,0.2,3.5,0.2,5.7v14.3c0,9.4,2.4,16.7,7.1,21.7s10.2,7.6,18,7.6h13.8c1.2,0,2.2-1,2.2-2.2V140l0,0c0-1.2-1-2.2-2.2-2.2H42.2c-4.4,0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c0.2-6.4-1.7-12.6-5.2-17.9c-1.6-2.5-3.5-4.7-5.7-6.6l0,0c-0.9-0.7-1.1-2-0.4-2.9C19.2,74.3,19.3,74.2,19.4,74L19.4,74z"/><path d="M412.5,74c-2.2-1.9-4.1-4.1-5.7-6.6c-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-0.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0l0,0V2.2c0-1.2,1-2.2,2.2-2.2c0,0,0,0,0,0h13.4c7.8,0,12.9,2.1,18,7.6s7.1,12.3,7.1,21.7v14.2c0,2.2,0.1,4,0.2,5.7v2.2c0.5,3.2,1.8,6.2,3.6,8.9c2.8,4.5,7.1,10.7,11.3,13.7l0,0l0.3,0.3l0,0l0.2,0.3h0.1v0.3l0,0c0.1,0.3,0.1,0.7,0,1l0,0v0.3h-0.1l-0.2,0.3l0,0l-0.3,0.3l0,0c-4.2,3.1-8.5,9.3-11.3,13.7c-1.8,2.7-3.1,5.7-3.6,8.9v2.2c-0.1,1.6-0.2,3.5-0.2,5.7v14.3c0,9.4-2.4,16.7-7.1,21.7s-10.2,7.6-18,7.6h-13.4c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0V140l0,0c0-1.2,1-2.2,2.2-2.2l0,0h12.7c4.4,0,7.5-1,9.2-3s2.7-5.6,2.7-10.5v-22.4c-0.2-6.3,1.6-12.6,5.1-17.9c1.6-2.5,3.5-4.7,5.7-6.6l0,0c0.9-0.7,1.1-2,0.4-2.9C412.7,74.3,412.6,74.2,412.5,74L412.5,74z"/></g></svg>
    </a>

    <nav class="Header-nav PrimaryNav">
      <ul class="menu">
        <li class="first expanded">
          <a href="https://developer.okta.com/product/">Product</a>
          <ul class="menu">
            <li class="first leaf"><a href="https://developer.okta.com/product/">Overview</a></li>
            <li class="leaf"><a href="https://developer.okta.com/product/authentication/">Authentication</a></li>
            <li class="leaf"><a href="https://developer.okta.com/product/authorization/">Authorization</a></li>
            <li class="last leaf"><a href="https://developer.okta.com/product/user-management/">User Management</a></li>
          </ul>
        </li>
        <li class="leaf">
          <a href="https://developer.okta.com/pricing/">Pricing</a>
        </li>
        <li class="leaf">
          <a href="/blog/" class="active">Blog</a>
        </li>
        <li class="leaf">
          <a href="/documentation/">Docs</a>
        </li>
        <li class="last expanded">
          <span class="nolink">Support</span>
          <ul class="menu">
            <li class="first leaf"><a href="https://devforum.okta.com/">Okta Developer Forums</a></li>
            <li class="last leaf"><a href="mailto:developers@okta.com">developers@okta.com</a></li>
          </ul>
        </li>
      </ul>
      <a class="PrimaryNav-toggle" href="#">
        <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g class="MenuIcon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                <path d="M1,16 L19,16" class="MenuIcon-line1" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,4 L19,4" class="MenuIcon-line2" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line3" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line4" stroke="#FFFFFF" stroke-width="2"></path>
            </g>
        </svg>
        <svg class="CloseIcon" width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g id="ALl-Boards" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Desktop" transform="translate(-915.000000, -235.000000)" fill="#FFFFFF">
              <g id="Search-bar-Active" transform="translate(30.000000, 26.000000)">
                <polygon id="Icon/Cross" points="901 210.6 899.4 209 893 215.4 886.6 209 885 210.6 891.4 217 885 223.4 886.6 225 893 218.6 899.4 225 901 223.4 894.6 217"></polygon>
              </g>
            </g>
          </g>
        </svg>
      </a>

      <div class="PrimaryNav-cta">
        <a target="_blank" rel="noopener noreferrer" href="https://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3Dhttps://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3D" class="Button--redOutline">Login</a>
        <a href="https://developer.okta.com/signup/" class="Button--red">Sign up</a>
      </div>

      <a class="SearchIcon" href="#"></a>
      <form id="form_search" class="SearchBar Formisimo_clocked_69929" method="get" action="https://developer.okta.com/search/" name="form_search" __bizdiag="-784164280" __biza="WJ__">
        <input type="text" name="stq" autocomplete="off" id="st-search-input-auto" class="st-search-input" placeholder="Search">
        <input type="submit" name="submit" value="GO">
      </form>

    </nav>

  </div>

</header>

	<div class="page-content">
		
		






<section class="Blog is-single">
		
	<div class="Blog-social">
		
		<a href="https://github.com/nbarbettini" target="_blank"><i class="fa fa-github"></i></a>
		
		
		<a href="https://twitter.com/nbarbettini" target="_blank"><i class="fa fa-twitter"></i></a>
		
		
		
		<a href="https://www.recaffeinate.co" target="_blank"><i class="fa fa-external-link"></i></a>
		
	</div>
	
	

<article class="BlogPost">

    <header class="BlogPost-header">

        <time class="BlogPost-date" datetime="2018-03-23">March 23, 2018</time>

        <h1 class="BlogPost-title">
            
            Token Authentication in ASP.NET Core 2.0 - A Complete Guide
            
        </h1>

        <div class="BlogPost-attribution">
            
            <img src="/assets/avatar-nbarbettini-a0243cc9bb3c05ffe2f758cfbcfc80f84f7371e39f5df4c86f608b1ea85fdab9.jpg" alt="avatar-nbarbettini.jpg" class="BlogPost-avatar">
            
            <span class="BlogPost-author">Nate Barbettini</span>
        </div>

    </header>

    <div class="BlogPost-content">
        
	<p>Token authentication has been a popular topic for the past few years, especially as mobile and JavaScript apps have continued to gain mindshare. Widespread adoption of token-based standards like <a href="/blog/2017/06/21/what-the-heck-is-oauth">OAuth 2.0 and OpenID Connect</a> have introduced even more developers to tokens, but the best practices aren’t always clear.</p>

<p>I spend a lot of time in the ASP.NET Core world and have been working with the framework since the pre-1.0 days. ASP.NET Core 2.0 has great support for consuming and validating tokens, thanks to built-in JWT validation middleware. However, many people were surprised about the removal of the token generation code from ASP.NET 4. In the early days of ASP.NET Core, the full token authentication story was a confusing jumble.</p>

<p>Now that ASP.NET Core 2.0 (soon 2.1) is stable, things have settled down. In this post, I’ll examine the best practices for both sides of the token authentication story: token validation and token generation.</p>

<h2 id="what-is-token-authentication">What is Token Authentication?</h2>
<p>Token authentication is the process of attaching a token (sometimes called an <em>access token</em> or a <em>bearer token</em>) to HTTP requests in order to authenticate them. It’s commonly used with APIs that serve mobile or SPA (JavaScript) clients.</p>

<p>Each request that arrives at the API is inspected. If a valid token is found, the request is allowed. If no token is found, or the token is invalid, the request is rejected with a <code class="highlighter-rouge">401 Unauthorized</code> response.</p>

<p>Token authentication is usually used in the context of OAuth 2.0 or OpenID Connect. If you want to brush up on how those protocols work, read our <a href="/blog/2017/07/25/oidc-primer-part-1">primer on OpenID Connect</a>, or watch my talk <a href="https://www.youtube.com/watch?v=996OiexHze0">OAuth and OpenID Connect in plain English</a> on YouTube!</p>

<h2 id="validate-tokens-in-aspnet-core">Validate Tokens in ASP.NET Core</h2>
<p>Adding token authentication to your API in ASP.NET Core is easy thanks to the <code class="highlighter-rouge">JwtBearerAuthentication</code> middleware included in the framework. If you’re consuming tokens created by a standard OpenID Connect server, the configuration is super easy.</p>

<p>In your <code class="highlighter-rouge">Startup</code> class, add the middleware anywhere in your <code class="highlighter-rouge">ConfigureServices</code> method, and configure it with the values from your authorization server:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">services</span><span class="p">.</span><span class="nf">AddAuthentication</span><span class="p">(</span><span class="n">JwtBearerDefaults</span><span class="p">.</span><span class="n">AuthenticationScheme</span><span class="p">)</span>
<span class="p">.</span><span class="nf">AddJwtBearer</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">options</span><span class="p">.</span><span class="n">Authority</span> <span class="p">=</span> <span class="s">"{yourAuthorizationServerAddress}"</span><span class="p">;</span>
    <span class="n">options</span><span class="p">.</span><span class="n">Audience</span> <span class="p">=</span> <span class="s">"{yourAudience}"</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Then, in your <code class="highlighter-rouge">Configure</code> method, add this line just above <code class="highlighter-rouge">UseMvc</code>:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">UseAuthentication</span><span class="p">();</span>
</code></pre></div></div>

<p>This second step of adding <code class="highlighter-rouge">UseAuthentication()</code> is easy to forget! I’ve done it a few times. If your authenticated calls aren’t working properly, make sure you’ve added this line in the right place (above <code class="highlighter-rouge">UseMvc</code>).</p>

<p>The <code class="highlighter-rouge">JwtBearer</code> middleware looks for tokens (JSON Web Tokens or JWTs) in the HTTP Authorization header of incoming requests. If a valid token is found, the request is authorized. You then add the <code class="highlighter-rouge">[Authorize]</code> attribute on your controllers or routes you want protected:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="nf">Route</span><span class="p">(</span><span class="s">"/api/protected"</span><span class="p">)</span>
<span class="na">[Authorize]</span>
<span class="k">public</span> <span class="kt">string</span> <span class="nf">Protected</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="s">"Only if you have a valid token!"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You might be wondering: with only the authority and audience specified, how does the <code class="highlighter-rouge">JwtBearer</code> middleware validate incoming tokens?</p>

<h3 id="automatic-authorization-server-metadata">Automatic Authorization Server Metadata</h3>

<p>When the <code class="highlighter-rouge">JwtBearer</code> middleware handles a request for the first time, it tries to retrieve some metadata from the authorization server (also called an authority or issuer). This metadata, or <em>discovery document</em> in OpenID Connect terminology, contains the public keys and other details needed to validate tokens. (Curious what the metadata looks like? Here’s an <a href="https://nate-example.oktapreview.com/oauth2/default/.well-known/openid-configuration">example discovery document</a>.)</p>

<p>If the <code class="highlighter-rouge">JwtBearer</code> middleware finds this metadata document, it configures itself automatically. Pretty nifty!</p>

<p>If the document doesn’t exist, you’ll get an error:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>System.IO.IOException: IDX10804: Unable to retrieve document from: "{yourAuthorizationServerAddress}".
System.Net.Http.HttpRequestException: Response status code does not indicate success: 404 (Not Found).
</code></pre></div></div>

<p>If your authorization server doesn’t publish this metadata, or you just want to specify the token validation parameters yourself, you can add them to the middleware configuration manually.</p>
<h3 id="specify-token-validation-parameters">Specify Token Validation Parameters</h3>
<p>The full set of <code class="highlighter-rouge">JwtBearer</code> options can be used if you want fine-grained control over how your tokens are validated:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">services</span><span class="p">.</span><span class="nf">AddAuthentication</span><span class="p">(</span><span class="n">JwtBearerDefaults</span><span class="p">.</span><span class="n">AuthenticationScheme</span><span class="p">)</span>
<span class="p">.</span><span class="nf">AddJwtBearer</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">options</span><span class="p">.</span><span class="n">TokenValidationParameters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TokenValidationParameters</span>
    <span class="p">{</span>
        <span class="c1">// Clock skew compensates for server time drift.</span>
        <span class="c1">// We recommend 5 minutes or less:</span>
        <span class="n">ClockSkew</span> <span class="p">=</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromMinutes</span><span class="p">(</span><span class="m">5</span><span class="p">),</span>
        <span class="c1">// Specify the key used to sign the token:</span>
        <span class="n">IssuerSigningKey</span> <span class="p">=</span> <span class="n">signingKey</span><span class="p">,</span>
        <span class="n">RequireSignedTokens</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="c1">// Ensure the token hasn't expired:</span>
        <span class="n">RequireExpirationTime</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">ValidateLifetime</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="c1">// Ensure the token audience matches our audience value (default true):</span>
        <span class="n">ValidateAudience</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">ValidAudience</span> <span class="p">=</span> <span class="s">"api://default"</span><span class="p">,</span>
        <span class="c1">// Ensure the token was issued by a trusted authorization server (default true):</span>
        <span class="n">ValidateIssuer</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">ValidIssuer</span> <span class="p">=</span> <span class="s">"https://nate-example.oktapreview.com/oauth2/default"</span>
    <span class="p">};</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The most common options to set in <code class="highlighter-rouge">TokenValidationParameters</code> are issuer, audience, and clock skew. You’ll also need to provide the key(s) your tokens will be signed with, which will look different depending on whether you’re using a symmetric or asymmetric key.</p>

<h2 id="understand-symmetric-and-asymmetric-signing">Understand Symmetric and Asymmetric Signing</h2>
<p>Tokens generated by your authorization server will be signed with either a symmetric key (HS256) or an asymmetric key (RS256). If your authorization server publishes a discovery document, it will include the key information so you don’t have to worry about how this works.</p>

<p>However, if you’re configuring the middleware yourself or are validating tokens manually, you’ll have to understand how your tokens are signed. What’s the difference between symmetric and asymmetric keys?</p>

<h3 id="symmetric-keys">Symmetric Keys</h3>
<p>A symmetric key, also called a shared key or shared secret, is a secret value (like a password) that is kept on both the API (your application) and the authorization server that’s issuing tokens. The authorization server signs the token payload with the shared key, and the API validates that incoming tokens are properly signed using the same key.</p>

<p>If you have a shared symmetric key, it’s easy to use it with the <code class="highlighter-rouge">JwtBearer</code> middleware:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// For example only! Don't store your shared keys as strings in code.</span>
<span class="c1">// Use environment variables or the .NET Secret Manager instead.</span>
<span class="kt">var</span> <span class="n">sharedKey</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SymmetricSecurityKey</span><span class="p">(</span>
    <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="s">"mysupers3cr3tsharedkey!"</span><span class="p">));</span>

<span class="n">services</span><span class="p">.</span><span class="nf">AddAuthentication</span><span class="p">(</span><span class="n">JwtBearerDefaults</span><span class="p">.</span><span class="n">AuthenticationScheme</span><span class="p">)</span>
<span class="p">.</span><span class="nf">AddJwtBearer</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">options</span><span class="p">.</span><span class="n">TokenValidationParameters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TokenValidationParameters</span>
    <span class="p">{</span>
        <span class="c1">// Specify the key used to sign the token:</span>
        <span class="n">IssuerSigningKey</span> <span class="p">=</span> <span class="n">sharedKey</span><span class="p">,</span>
        <span class="n">RequireSignedTokens</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="c1">// Other options...</span>
    <span class="p">};</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Make sure you keep the key safe! Storing it in your code (like the above example) is a bad idea since it’s easy to accidentally check it into source control. Instead, store it in environment variables on your server, or use the <a href="https://docs.microsoft.com/en-us/aspnet/core/security/app-secrets">.NET Secret Manager</a>. The <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/">ASP.NET Core configuration model</a> makes it easy to load the value from the environment or user secrets:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">sharedKey</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SymmetricSecurityKey</span><span class="p">(</span>
    <span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="nf">GetBytes</span><span class="p">(</span><span class="n">Configuration</span><span class="p">[</span><span class="s">"SigningKey"</span><span class="p">]);</span>
</code></pre></div></div>

<p>Likewise, don’t store your shared key in your frontend code or expose it to the browser. It must be kept protected on your server.</p>

<h3 id="asymmetric-keys">Asymmetric Keys</h3>
<p>With asymmetric signing, you don’t need to keep a secret key on your server. Instead, a public/private keypair is used: the authorization server signs tokens with a secret private key, and publishes a public key that anyone can use to validate tokens.</p>

<p>Usually, the public key information is automatically retrieved from the discovery document as described in the section above. If you need to specify it manually, you’ll need to get the key parameters from the authorization server and create a <code class="highlighter-rouge">SecurityKey</code> object:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Manually specify a public (asymmetric) key published as a JWK:</span>
<span class="kt">var</span> <span class="n">publicJwk</span> <span class="p">=</span> <span class="k">new</span> <span class="n">JsonWebKey</span>
<span class="p">{</span>
    <span class="n">KeyId</span> <span class="p">=</span> <span class="s">"(some key ID)"</span><span class="p">,</span>
    <span class="n">Alg</span> <span class="p">=</span> <span class="s">"RS256"</span><span class="p">,</span>
    <span class="n">E</span> <span class="p">=</span> <span class="s">"AQAB"</span><span class="p">,</span>
    <span class="n">N</span> <span class="p">=</span> <span class="s">"(a long string)"</span><span class="p">,</span>
    <span class="n">Kty</span> <span class="p">=</span> <span class="s">"RSA"</span><span class="p">,</span>
    <span class="n">Use</span> <span class="p">=</span> <span class="s">"sig"</span>
<span class="p">};</span>
</code></pre></div></div>

<p>In most cases, the public keys are available in a JSON Web Key Set (JWKS) on the authorization server (here’s an <a href="https://nate-example.oktapreview.com/oauth2/default/v1/keys">example JWKS</a>). The authorization server may rotate the keys periodically, too, so you’ll need to check for updated keys regularly. If you let the <code class="highlighter-rouge">JwtBearer</code> middleware auto-configure via the discovery document, this all works automatically!</p>

<h2 id="validate-tokens-manually-in-aspnet-core">Validate Tokens Manually in ASP.NET Core</h2>
<p>In some cases, you might need to validate tokens <em>without</em> using the <code class="highlighter-rouge">JwtBearer</code> middleware. Using the middleware should always be the first choice, since it plugs nicely (and automatically) into the ASP.NET Core authorization system.</p>

<p>If you absolutely need to validate a JWT by hand, you can use the <code class="highlighter-rouge">JwtSecurityTokenHandler</code> in the <a href="https://www.nuget.org/packages/System.IdentityModel.Tokens.Jwt">System.IdentityModel.Tokens.Jwt</a> package. It uses the same <code class="highlighter-rouge">TokenValidationParameters</code> class to specify the validation options:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">static</span> <span class="n">JwtSecurityToken</span> <span class="nf">ValidateAndDecode</span><span class="p">(</span><span class="kt">string</span> <span class="n">jwt</span><span class="p">,</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">SecurityKey</span><span class="p">&gt;</span> <span class="n">signingKeys</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">validationParameters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TokenValidationParameters</span>
    <span class="p">{</span>
        <span class="c1">// Clock skew compensates for server time drift.</span>
        <span class="c1">// We recommend 5 minutes or less:</span>
        <span class="n">ClockSkew</span> <span class="p">=</span> <span class="n">TimeSpan</span><span class="p">.</span><span class="nf">FromMinutes</span><span class="p">(</span><span class="m">5</span><span class="p">),</span>
        <span class="c1">// Specify the key used to sign the token:</span>
        <span class="n">IssuerSigningKeys</span> <span class="p">=</span> <span class="n">signingKeys</span><span class="p">,</span>
        <span class="n">RequireSignedTokens</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="c1">// Ensure the token hasn't expired:</span>
        <span class="n">RequireExpirationTime</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">ValidateLifetime</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="c1">// Ensure the token audience matches our audience value (default true):</span>
        <span class="n">ValidateAudience</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">ValidAudience</span> <span class="p">=</span> <span class="s">"api://default"</span><span class="p">,</span>
        <span class="c1">// Ensure the token was issued by a trusted authorization server (default true):</span>
        <span class="n">ValidateIssuer</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
        <span class="n">ValidIssuer</span> <span class="p">=</span> <span class="s">"https://nate-example.oktapreview.com/oauth2/default"</span>
    <span class="p">};</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">claimsPrincipal</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">JwtSecurityTokenHandler</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">ValidateToken</span><span class="p">(</span><span class="n">jwt</span><span class="p">,</span> <span class="n">validationParameters</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">rawValidatedToken</span><span class="p">);</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">JwtSecurityToken</span><span class="p">)</span><span class="n">rawValidatedToken</span><span class="p">;</span>
        <span class="c1">// Or, you can return the ClaimsPrincipal</span>
        <span class="c1">// (which has the JWT properties automatically mapped to .NET claims)</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">SecurityTokenValidationException</span> <span class="n">stvex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// The token failed validation!</span>
        <span class="c1">// TODO: Log it or display an error.</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="p">(</span><span class="s">$"Token failed validation: </span><span class="p">{</span><span class="n">stvex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">ArgumentException</span> <span class="n">argex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// The token was not well-formed or was invalid for some other reason.</span>
        <span class="c1">// TODO: Log it or display an error.</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="p">(</span><span class="s">$"Token was invalid: </span><span class="p">{</span><span class="n">argex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If your authorization server publishes a metadata document, you can retrieve it with the <code class="highlighter-rouge">OpenIdConnectConfigurationRetriever</code> class in the <a href="https://www.nuget.org/packages/Microsoft.IdentityModel.Protocols.OpenIdConnect/">Microsoft.IdentityModel.Protocols.OpenIdConnect</a> package. This will let you get signing keys automatically:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">configurationManager</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ConfigurationManager</span><span class="p">&lt;</span><span class="n">OpenIdConnectConfiguration</span><span class="p">&gt;(</span>
    <span class="c1">// .well-known/oauth-authorization-server or .well-known/openid-configuration</span>
    <span class="s">"{yourAuthorizationServerAddress}/.well-known/openid-configuration"</span><span class="p">,</span>
    <span class="k">new</span> <span class="nf">OpenIdConnectConfigurationRetriever</span><span class="p">(),</span>
    <span class="k">new</span> <span class="nf">HttpDocumentRetriever</span><span class="p">());</span>

<span class="kt">var</span> <span class="n">discoveryDocument</span> <span class="p">=</span> <span class="k">await</span> <span class="n">configurationManager</span><span class="p">.</span><span class="nf">GetConfigurationAsync</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">signingKeys</span> <span class="p">=</span> <span class="n">discoveryDocument</span><span class="p">.</span><span class="n">SigningKeys</span><span class="p">;</span>
</code></pre></div></div>

<p>That takes care of the <em>validation</em> side of token authentication, but what about generating the tokens themselves?</p>

<h2 id="generate-tokens-for-authentication-in-aspnet-core">Generate Tokens for Authentication in ASP.NET Core</h2>
<p>Back in the ASP.NET 4.5 days, the <code class="highlighter-rouge">UseOAuthAuthorizationServer</code> middleware gave you an endpoint thatgit. Specifically, you’ll need to either find or build an authorization server that can generate tokens.</p>

<p>The two common ways to get an authorization server are:</p>

<ul>
  <li>Using a cloud service like Azure AD B2C or <a href="/quickstart/#/widget/dotnet/aspnetcore">Okta</a></li>
  <li>Building or configuring your own</li>
</ul>

<h3 id="hosted-authorization-server-with-okta">Hosted Authorization Server with Okta</h3>
<p>A hosted authorization server is the easiest way to generate tokens, because you don’t need to build (or maintain) anything yourself. You can sign up for a <a href="https://developer.okta.com/signup/">free account</a> and then follow the <a href="/quickstart/#/widget/dotnet/aspnetcore">Okta + ASP.NET Core API quickstart</a> for step-by-step instructions.</p>

<p>Since the authorization server Okta creates for you has a standard discovery document, the <code class="highlighter-rouge">JwtBearer</code> configuration is super simple:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">services</span><span class="p">.</span><span class="nf">AddAuthentication</span><span class="p">(</span><span class="n">JwtBearerDefaults</span><span class="p">.</span><span class="n">AuthenticationScheme</span><span class="p">)</span>
<span class="p">.</span><span class="nf">AddJwtBearer</span><span class="p">(</span><span class="n">options</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">options</span><span class="p">.</span><span class="n">Authority</span> <span class="p">=</span> <span class="s">"<span class="okta-preview-domain"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span></span>/oauth2/default"</span><span class="p">;</span>
    <span class="n">options</span><span class="p">.</span><span class="n">Audience</span> <span class="p">=</span> <span class="s">"api://default"</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p>If you want to roll your own authorization server, you can use one of the popular <a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/community">community-built packages</a>:</p>

<h3 id="openiddict">OpenIddict</h3>
<p><a href="https://github.com/openiddict/openiddict-core">OpenIddict</a> is an easy-to-configure authorization server that works nicely with <a href="https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity">ASP.NET Core Identity</a> and Entity Framework Core. It plugs right into the ASP.NET Core middleware pipeline and is easy to configure.</p>

<p>OpenIddict is a great choice if you’re already using ASP.NET Core Identity and want to generate tokens for your users. You can follow Mike Rousos’ in-depth <a href="https://blogs.msdn.microsoft.com/webdev/2016/10/27/bearer-token-authentication-in-asp-net-core/">tutorial on the MSDN blog</a> to set it up and configure it in your application.</p>

<h3 id="asos">ASOS</h3>
<p>The <a href="https://github.com/aspnet-contrib/AspNet.Security.OpenIdConnect.Server">AspNet.Security.OpenIdConnect.Server</a> package is lower-level than OpenIddict (in fact, OpenIddict uses it under the hood). It takes more work to set up, but it’s useful when you want to have more direct control over how the OpenID Connect protocol is handled and how tokens are generated. 
Kévin Chalet has an in-depth <a href="http://kevinchalet.com/2016/07/13/creating-your-own-openid-connect-server-with-asos-introduction/">tutorial on creating an OpenID Connect server</a> on his blog.</p>

<h3 id="identityserver4">IdentityServer4</h3>
<p>Thinktecture’s open-source <a href="https://github.com/IdentityServer/IdentityServer4">IdentityServer project</a> has been around for a long time, and it got a major update for .NET Core with IdentityServer4. Of the three packages discussed here, it’s the most powerful and flexible.</p>

<p>IdentityServer is a good choice when you want to roll your own full-fledged OpenID Connect authorization server that can handle complex use cases like federation and single sign-on. Depending on your use case, configuring IdentityServer4 can be a little complicated. Fortunately, the <a href="http://docs.identityserver.io/en/release/">official documentation</a> covers many common scenarios.</p>

<h2 id="token-authentication-can-be-complex">Token Authentication Can Be Complex!</h2>
<p>I hope this article helps it feel a little less confusing. The ASP.NET Core team has done a great job of making it easy to add token authentication to your ASP.NET Core API, and options like OpenIddict and Okta make it easy to spin up an authorization server that generates tokens for your clients.</p>

<p>Here are some more resources if you want to keep learning:</p>
<ul>
  <li><a href="/blog/2018/02/01/secure-aspnetcore-webapi-token-auth">How to Secure Your .NET Web API with Token Authentication</a> here on the Okta blog</li>
  <li>A <a href="https://andrewlock.net/a-look-behind-the-jwt-bearer-authentication-middleware-in-asp-net-core/">deep dive into the JWT bearer middleware</a> on Andrew Lock’s blog</li>
  <li><a href="/blog/2017/06/21/what-the-heck-is-oauth">What the Heck is OAuth?</a></li>
  <li>Our <a href="/blog/2017/07/25/oidc-primer-part-1">primer on OpenID Connect</a></li>
  <li><a href="https://www.youtube.com/watch?v=996OiexHze0">OAuth and OpenID Connect in plain English</a> on YouTube, by yours truly</li>
</ul>

<p>I’d love to hear your feedback! If you have questions or thoughts, post a comment below. You can also reach us on Twitter <a href="https://twitter.com/oktadev">@oktadev</a>.</p>



    </div>

    
    <div id="disqus">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_title = "Token Authentication in ASP.NET Core 2.0 - A Complete Guide";
            var disqus_url = 'https://developer.okta.com/blog/2018/03/23/token-authentication-aspnetcore-complete-guide';

            (function () {
                var dsq = document.createElement('script');
                dsq.async = true;
                dsq.type = 'text/javascript';
                dsq.src = '//oktadevblog.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>
          <noscript>
              Please enable JavaScript to view the
              <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus</a>.
         </noscript>
    </div>
    
</article>

		
</section>

		
	</div>
	<footer class="Footer">
    <div class="Wrap">

        <div class="Row">

            <div class="Column--3 Column--medium-6 Column--xSmall-12">
                <a href="https://www.okta.com/" target="_blank" rel="noopener noreferrer">
                    <div class="Logo">
                        <img src="https://developer.okta.com/sites/all/themes/developer/images/logo-footer.png" alt="Okta">
                    </div>
                    <p>Visit okta.com</p>
                </a>
            </div>

            <div class="Column--3 Column--medium-12 Column--xSmall-12">
                <h4>Social</h4>
                <ul class="Footer-links Footer-links--social">
                    <li><a class="Footer-links--github" target="_blank" rel="noopener noreferrer" href="http://github.com/oktadeveloper">Github</a></li>
                    <li><a class="Footer-links--twitter" target="_blank" rel="noopener noreferrer" href="http://twitter.com/OktaDev">Twitter</a></li>
                    <li><a class="Footer-links--forum" target="_blank" rel="noopener noreferrer" href="https://devforum.okta.com/">Forum</a></li>
                    <li><a class="Footer-links--rss" target="_blank" rel="noopener noreferrer" href="http://feeds.feedburner.com/OktaBlog">RSS Blog</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>More Info</h4>
                <ul class="Footer-links">
                    <li><a target="_blank" href="https://developer.okta.com/integrate-with-okta/">Integrate with Okta</a></li>
                    <li><a href="/blog/">Blog</a></li>
                    <li><a href="/docs/change-log/">Change Log</a></li>
                    <li><a href="/3rd_party_notices/">3rd Party Notices</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>Contact &amp; Legal</h4>
                <ul class="Footer-links">
                    <li><a href="https://developer.okta.com/contact/">Contact Sales</a></li>
                    <li><a target="_blank" rel="noopener noreferrer" href="mailto:developers@okta.com">Contact Support</a></li>
                    <li><a href="https://developer.okta.com/terms/">Terms &amp; Conditions</a></li>
                    <li><a href="https://developer.okta.com/privacy/">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script type="text/javascript" src="/assets/master-aa397c892d9083236c5cb20732dde679021b9236c8142ce78177b8b184567a02.js"></script>
    <script type="text/javascript" src="/assets/myOkta-911cbafbbe079b7a5522d9cbe15bd2a5f44e1582531e88393934bec69f97696b.js"></script>
    
    
    
    
      <script type="text/javascript" src="/assets/blog-6e32dad27404131cc8630a5282264bed2ab4c08c91ac86fa496b75c53aa4f681.js"></script>
    

  <!-- START Post Footer -->
  
  <!-- START Google Tag Manager -->
  <!-- https://support.google.com/tagmanager/answer/6103696?hl=en -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- END Google Tag Manager -->
  <!-- START Google Remarketing Tag -->
  <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1006913831;
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
  </script>
  <div style="display:none;"><script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script></div>
  <noscript><div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"></div></noscript>
  <!-- END Google Remarketing Tag -->
  <!-- START Crazy Egg Tracking -->
  <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
  <!-- END Crazy Egg Tracking -->

  <!-- END Post Footer -->
</body>
</html>
