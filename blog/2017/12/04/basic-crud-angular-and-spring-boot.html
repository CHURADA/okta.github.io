<!doctype html>
<!--[if lt IE 7 ]> <html class="ie6 no-flexbox"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7 no-flexbox"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8 no-flexbox"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9 no-flexbox"> <![endif]-->
<!--[if IE 10 ]>    <html class="ie10 no-flexbox"> <![endif]-->
<!--[if (gt IE 10)|!(IE)]><!--> <html class="modern wf-loading" lang="en"> <!--<![endif]-->
  <head>
  <script>
    var searchDomain = 'https://developer.okta.com';
    var isProduction = window.location.hostname === 'developer.okta.com';
    if (isProduction) {
      // TypeKit
      (function(d) {
        var config = {
          kitId: 'jff5neq',
          scriptTimeout: 3000,
          async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/bwf-loadingb/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);

      // Google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15777010-3', 'auto');
      ga('send', 'pageview');

      // START Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TJ45R6');
      // END Google Tag Manager
    }
  </script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   

  <link type="text/css" rel="stylesheet" href="https://developer.okta.com/sites/all/themes/developer/css/master.css" media="all" />
  <meta class="swiftype" name="title" data-type="string" content="Build a Basic CRUD App with Angular 5.0 and Spring Boot 2.0 | Okta Developer">
  <meta class="swiftype" name="summary" data-type="string" content="Angular and Spring Boot are arguably the two most popular frameworks in all of web development. Matt Raible shows you how to use them together in the same app, and how to secure it all with Okta." />

  <link type="text/css" rel="stylesheet" href="/assets/animate-ec43d72c3ed45e08a460b8a2966d8dba6006aebfa0530935c3973fa493a8771f.css">
  <link type="text/css" rel="stylesheet" href="/assets/okta-9cafcbcda0dfe686bf4c513405579bab5aeda9909c278a37b465dbc8bbfaac6d.css">
  
  
  <title>Build a Basic CRUD App with Angular 5.0 and Spring Boot 2.0 | Okta Developer</title>
  <meta name="description" content="Angular and Spring Boot are arguably the two most popular frameworks in all of web development. Matt Raible shows you how to use them together in the same app, and how to secure it all with Okta.">
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="https://developer.okta.com/feed.xml"><!-- GA -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon/manifest.json">
  <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#21313a">
  <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
</head>

  
    <body id="blog">
	




<header class="Header is-fixed">

  <div class="Wrap">

    <a class="Logo" href="https://developer.okta.com">
      <svg version="1.1" id="OktaLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 431.9 151.4" style="enable-background:new 0 0 431.9 151.4;" xml:space="preserve"><g><g><g><path d="M102.2,41.4c-21,0-38.1,17.1-38.1,38.1s17.1,38.1,38.1,38.1s38.1-17.1,38.1-38.1l0,0C140.3,58.5,123.2,41.4,102.2,41.4z M102.2,98.5c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19c0.1,10.5-8.4,19-18.9,19.1C102.3,98.6,102.2,98.6,102.2,98.5L102.2,98.5z"/><path d="M169.1,92.3c0-1.9,1.5-3.4,3.4-3.4c0.9,0,1.8,0.4,2.4,1c9.5,9.7,25.3,26.3,25.4,26.4c0.4,0.5,0.8,0.8,1.4,0.9l1.6,0.2h17.2c1.8,0,3.3-1.4,3.4-3.2c0-0.8-0.3-1.5-0.8-2.2l-28.6-29.2l-1.5-1.5c-3.2-3.9-2.9-5.4,0.8-9.3l22.6-25.1c1.1-1.4,0.8-3.5-0.6-4.6c-0.6-0.4-1.3-0.7-2-0.7h-17c-0.6,0.2-1.1,0.5-1.5,0.9L175,64.4c-1.3,1.4-3.4,1.5-4.8,0.2c-0.7-0.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3c-0.1,0-0.2,0-0.3,0h-12.7c-2.2,0-3.3,1.5-3.3,2.8v95.8c0,2.2,1.8,2.8,3.3,2.8h12.7c1.7,0.1,3.2-1.2,3.3-2.9c0,0,0,0,0,0V92.3z"/><path d="M273,114l-1.4-12.8c-0.2-1.7-1.7-2.9-3.4-2.7c0,0,0,0-0.1,0l-2.9,0.2c-10.1,0-18.5-7.9-19-18c0-0.3,0-0.7,0-1V64.2c-0.1-2,1.5-3.6,3.5-3.7c0,0,0,0,0,0h17c1.7-0.1,3.1-1.5,3-3.2c0,0,0-0.1,0-0.1v-12c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9,0.1-3.5-1.5-3.6-3.4c0,0,0,0,0,0V18.9c-0.1-1.7-1.5-3.1-3.2-3c0,0-0.1,0-0.1,0h-12.7c-1.6-0.1-3,1.1-3.1,2.7c0,0.1,0,0.1,0,0.2c0,0,0,61.7,0,62c0.5,21,17.9,37.6,38.9,37c1.4,0,2.9-0.2,4.3-0.3C272,117.2,273.2,115.7,273,114z"/></g><path d="M364.7,98c-10.8,0-12.4-3.8-12.4-18.3l0,0V44.8c0-1.8-1.4-3.2-3.2-3.2c0,0-0.1,0-0.1,0h-12.8c-1.8,0-3.2,1.4-3.3,3.2v1.6C314.6,36,291.3,42.5,281,60.8c-10.4,18.3-3.9,41.6,14.4,51.9c14,7.9,31.4,6.2,43.5-4.2c3.6,5.5,9.3,9.1,18.3,9.1c1.5,0,9.7,0.3,9.7-3.5v-13.6C367,99.2,366,98.1,364.7,98z M314.2,98.6c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19l0,0C333.2,90.1,324.7,98.6,314.2,98.6z"/></g><path d="M19.4,74c2.2-1.9,4.1-4.1,5.7-6.6c3.5-5.3,5.4-11.5,5.2-17.9V27c0-4.9,0.9-8.4,2.7-10.5c1.8-2.1,4.8-3,9.2-3h12.6c1.2,0,2.1-0.9,2.2-2.1l0,0V2.2C57,1,56,0,54.8,0c0,0,0,0,0,0H41.5c-7.8,0-12.9,2.1-18,7.6s-7.1,12.3-7.1,21.7v14.2c0,2.2-0.1,4-0.2,5.7v2.2c-0.5,3.2-1.8,6.2-3.6,8.9C9.4,64.7,5.1,70.9,0.9,74l0,0l-0.3,0.3l0,0l-0.2,0.3H0.2v0.3l0,0c-0.1,0.3-0.1,0.7,0,1l0,0v0.3h0.1l0.2,0.3l0,0l0.3,0.3l0,0c4.2,3.1,8.5,9.3,11.3,13.7c1.8,2.7,3.1,5.7,3.6,8.9v2.2c0.1,1.6,0.2,3.5,0.2,5.7v14.3c0,9.4,2.4,16.7,7.1,21.7s10.2,7.6,18,7.6h13.8c1.2,0,2.2-1,2.2-2.2V140l0,0c0-1.2-1-2.2-2.2-2.2H42.2c-4.4,0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c0.2-6.4-1.7-12.6-5.2-17.9c-1.6-2.5-3.5-4.7-5.7-6.6l0,0c-0.9-0.7-1.1-2-0.4-2.9C19.2,74.3,19.3,74.2,19.4,74L19.4,74z"/><path d="M412.5,74c-2.2-1.9-4.1-4.1-5.7-6.6c-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-0.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0l0,0V2.2c0-1.2,1-2.2,2.2-2.2c0,0,0,0,0,0h13.4c7.8,0,12.9,2.1,18,7.6s7.1,12.3,7.1,21.7v14.2c0,2.2,0.1,4,0.2,5.7v2.2c0.5,3.2,1.8,6.2,3.6,8.9c2.8,4.5,7.1,10.7,11.3,13.7l0,0l0.3,0.3l0,0l0.2,0.3h0.1v0.3l0,0c0.1,0.3,0.1,0.7,0,1l0,0v0.3h-0.1l-0.2,0.3l0,0l-0.3,0.3l0,0c-4.2,3.1-8.5,9.3-11.3,13.7c-1.8,2.7-3.1,5.7-3.6,8.9v2.2c-0.1,1.6-0.2,3.5-0.2,5.7v14.3c0,9.4-2.4,16.7-7.1,21.7s-10.2,7.6-18,7.6h-13.4c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0V140l0,0c0-1.2,1-2.2,2.2-2.2l0,0h12.7c4.4,0,7.5-1,9.2-3s2.7-5.6,2.7-10.5v-22.4c-0.2-6.3,1.6-12.6,5.1-17.9c1.6-2.5,3.5-4.7,5.7-6.6l0,0c0.9-0.7,1.1-2,0.4-2.9C412.7,74.3,412.6,74.2,412.5,74L412.5,74z"/></g></svg>
    </a>

    <nav class="Header-nav PrimaryNav">
      <ul class="menu">
        <li class="first expanded">
          <a href="https://developer.okta.com/product/">Product</a>
          <ul class="menu">
            <li class="first leaf"><a href="https://developer.okta.com/product/">Overview</a></li>
            <li class="leaf"><a href="https://developer.okta.com/product/authentication/">Authentication</a></li>
            <li class="leaf"><a href="https://developer.okta.com/product/authorization/">Authorization</a></li>
            <li class="last leaf"><a href="https://developer.okta.com/product/user-management/">User Management</a></li>
          </ul>
        </li>
        <li class="leaf">
          <a href="https://developer.okta.com/pricing/">Pricing</a>
        </li>
        <li class="leaf">
          <a href="/blog/" class="active">Blog</a>
        </li>
        <li class="leaf">
          <a href="/documentation/">Docs</a>
        </li>
        <li class="last expanded">
          <span class="nolink">Support</span>
          <ul class="menu">
            <li class="first leaf"><a href="https://devforum.okta.com/">Okta Developer Forums</a></li>
            <li class="last leaf"><a href="mailto:developers@okta.com">developers@okta.com</a></li>
          </ul>
        </li>
      </ul>
      <a class="PrimaryNav-toggle" href="#">
        <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g class="MenuIcon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                <path d="M1,16 L19,16" class="MenuIcon-line1" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,4 L19,4" class="MenuIcon-line2" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line3" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line4" stroke="#FFFFFF" stroke-width="2"></path>
            </g>
        </svg>
        <svg class="CloseIcon" width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g id="ALl-Boards" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Desktop" transform="translate(-915.000000, -235.000000)" fill="#FFFFFF">
              <g id="Search-bar-Active" transform="translate(30.000000, 26.000000)">
                <polygon id="Icon/Cross" points="901 210.6 899.4 209 893 215.4 886.6 209 885 210.6 891.4 217 885 223.4 886.6 225 893 218.6 899.4 225 901 223.4 894.6 217"></polygon>
              </g>
            </g>
          </g>
        </svg>
      </a>

      <div class="PrimaryNav-cta">
        <a target="_blank" rel="noopener noreferrer" href="https://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3Dhttps://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3D" class="Button--redOutline">Login</a>
        <a href="https://developer.okta.com/signup/" class="Button--red">Sign up</a>
      </div>

      <a class="SearchIcon" href="#"></a>
      <form id="form_search" class="SearchBar Formisimo_clocked_69929" method="get" action="https://developer.okta.com/search/" name="form_search" __bizdiag="-784164280" __biza="WJ__">
        <input type="text" name="stq" autocomplete="off" id="st-search-input-auto" class="st-search-input" placeholder="Search">
        <input type="submit" name="submit" value="GO">
      </form>

    </nav>

  </div>

</header>

	<div class="page-content">
		






<section class="Blog is-single">
		
	<div class="Blog-social">
		
		<a href="https://github.com/mraible" target="_blank"><i class="fa fa-github"></i></a>
		
		
		<a href="https://twitter.com/mraible" target="_blank"><i class="fa fa-twitter"></i></a>
		
		
		
		<a href="http://raibledesigns.com" target="_blank"><i class="fa fa-external-link"></i></a>
		
	</div>
	
	

<article class="BlogPost">

    <header class="BlogPost-header">

        <time class="BlogPost-date" datetime="2017-12-04">December 4, 2017</time>

        <h1 class="BlogPost-title">
            
            Build a Basic CRUD App with Angular 5.0 and Spring Boot 2.0
            
        </h1>

        <div class="BlogPost-attribution">
            
            <img src="/assets/avatar-matt_raible-9974af6192eb1753b7137c8fff0a2c6e6bb9736a2517986cb5cc50bb040e83d4.jpg" alt="avatar-matt_raible.jpg" class="BlogPost-avatar">
            
            <span class="BlogPost-author">Matt Raible</span>
        </div>

    </header>

    <div class="BlogPost-content">
        
	<p>Technology moves fast these days. It can be challenging to keep up with the latest trends as well as new releases of your favorite projects. I’m here to help! Spring Boot and Angular are two of my favorite projects, so I figured I’d write y’all a guide to show you how to build and secure a basic app using their latest and greatest releases.</p>

<p>In Spring Boot, the most significant change in 2.0 is its new web framework: Spring WebFlux. In Angular 5.0, we get a new <code class="highlighter-rouge">HttpClient</code> on the table. This class replaces <code class="highlighter-rouge">Http</code>, and is a bit easier to use, with less boilerplate code. Today, I’m not going to explore Spring WebFlux, because we still <a href="https://github.com/okta/okta-spring-boot/issues/24">have some work to do</a> before we can support in with the <a href="https://github.com/okta/okta-spring-boot">Okta Spring Boot Starter</a>.</p>

<p>The good news is our <a href="https://www.npmjs.com/package/@okta%2Fokta-angular">Angular SDK</a> works well with Angular 5, so I’ll be showing how to use it in this blog post. Speaking of Angular, did you know that Angular has <a href="https://stackoverflow.blog/2017/11/13/cliffs-insanity-dramatic-shifts-technologies-stack-overflow/">one of the most dramatic increases in questions on Stack Overflow</a>? You might think this means a lot of people have issues with Angular. I like to think that there’s a lot of people using it, and developers often have questions when using a new technology. It’s a definite sign of a healthy community. You rarely see a lot of questions on Stack Overflow for a dying technology.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/increase-in-stack-overflow-technologies-2017-a48e592cdcc3f179f167829b6bdc72772f2fe3645cd3d89c29f28fb6fff0e5a3.png" alt="Year over year change in questions asked for tags in Stack Overflow" width="800" class="center-image" /></p>

<p>This article describes how to build a simple CRUD application that displays a list of cool cars. It’ll allow you to edit the list, and it’ll show an animated gif from <a href="http://giphy.com">GIPHY</a> that matches the car’s name. You’ll also learn how to secure your application using Okta’s Spring Boot starter and Angular SDK.</p>

<p>You will need <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Java 8</a> and <a href="https://nodejs.org/">Node.js 8</a> installed to complete this tutorial.</p>

<h2 id="build-an-api-with-spring-boot-20">Build an API with Spring Boot 2.0</h2>

<p>To get started with <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> 2.0, you can work with its recent milestone release. Head on over to <a href="https://start.spring.io">start.spring.io</a> and create a new project that uses Java, Spring Boot version 2.0.0 M6, and options to create a simple API: JPA, H2, Rest Repositories, Lombok, and Web. In this example, I’ve added Actuator as well, since it’s a <a href="https://dzone.com/articles/spring-boot-actuator-a-complete-guide">very cool feature</a> of Spring Boot.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/start.spring.io-70cb33a97288dc9d10f94634c335acf64d285b810b10d4d424cf0953517fcb0e.png" alt="Spring Initializr" width="800" class="center-image" /></p>

<p>Create a directory to hold your server and client applications. I called mine <code class="highlighter-rouge">okta-spring-boot-2-angular-5-example</code>, but you can call yours whatever you like. If you’d rather just see the app running than write code, you can <a href="https://github.com/oktadeveloper/okta-spring-boot-2-angular-5-example">see the example on GitHub</a>, or clone and run locally using the commands below.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/oktadeveloper/okta-spring-boot-2-angular-5-example.git
<span class="nb">cd </span>okta-spring-boot-2-angular-5-example/client <span class="o">&amp;&amp;</span> npm install <span class="o">&amp;&amp;</span> ng serve &amp;
<span class="nb">cd</span> ../server <span class="o">&amp;&amp;</span> ./mvnw spring-boot:run
</code></pre></div></div>

<p>After downloading <code class="highlighter-rouge">demo.zip</code> from start.spring.io, expand it and copy the <code class="highlighter-rouge">demo</code> directory to your app-holder directory. Rename <code class="highlighter-rouge">demo</code> to <code class="highlighter-rouge">server</code>. Open the project in your favorite IDE and create a <code class="highlighter-rouge">Car.java</code> file in the <code class="highlighter-rouge">src/main/java/com/okta/developer/demo</code> directory. You can use Lombok’s annotations to reduce boilerplate code.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">okta</span><span class="o">.</span><span class="na">developer</span><span class="o">.</span><span class="na">demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Getter</span> <span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@ToString</span> <span class="nd">@EqualsAndHashCode</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Car</span> <span class="o">{</span>
    <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nd">@NonNull</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Create a <code class="highlighter-rouge">CarRepository</code> class to perform CRUD (create, read, update, and delete) on the <code class="highlighter-rouge">Car</code> entity.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">okta</span><span class="o">.</span><span class="na">developer</span><span class="o">.</span><span class="na">demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.JpaRepository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.rest.core.annotation.RepositoryRestResource</span><span class="o">;</span>

<span class="nd">@RepositoryRestResource</span>
<span class="kd">interface</span> <span class="nc">CarRepository</span> <span class="kd">extends</span> <span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Car</span><span class="o">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Add an <code class="highlighter-rouge">ApplicationRunner</code> bean to the <code class="highlighter-rouge">DemoApplication</code> class (in <code class="highlighter-rouge">src/main/java/com/okta/developer/demo/DemoApplication.java</code>) and use it to add some default data to the database.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">okta</span><span class="o">.</span><span class="na">developer</span><span class="o">.</span><span class="na">demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.boot.ApplicationRunner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Stream</span><span class="o">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DemoApplication</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">DemoApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="n">ApplicationRunner</span> <span class="nf">init</span><span class="o">(</span><span class="n">CarRepository</span> <span class="n">repository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">args</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Ferrari"</span><span class="o">,</span> <span class="s">"Jaguar"</span><span class="o">,</span> <span class="s">"Porsche"</span><span class="o">,</span> <span class="s">"Lamborghini"</span><span class="o">,</span> <span class="s">"Bugatti"</span><span class="o">,</span>
                      <span class="s">"AMC Gremlin"</span><span class="o">,</span> <span class="s">"Triumph Stag"</span><span class="o">,</span> <span class="s">"Ford Pinto"</span><span class="o">,</span> <span class="s">"Yugo GV"</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">name</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">Car</span> <span class="n">car</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Car</span><span class="o">();</span>
                <span class="n">car</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
                <span class="n">repository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">car</span><span class="o">);</span>
            <span class="o">});</span>
            <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>If you start your app (using <code class="highlighter-rouge">./mvnw spring-boot:run</code>) after adding this code, you’ll see the list of cars displayed in your console on startup.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Car(id=1, name=Ferrari)
Car(id=2, name=Jaguar)
Car(id=3, name=Porsche)
Car(id=4, name=Lamborghini)
Car(id=5, name=Bugatti)
Car(id=6, name=AMC Gremlin)
Car(id=7, name=Triumph Stag)
Car(id=8, name=Ford Pinto)
Car(id=9, name=Yugo GV)
</code></pre></div></div>

<p>Add a <code class="highlighter-rouge">CoolCarController</code> class (in <code class="highlighter-rouge">src/main/java/com/okta/developer/demo/CoolCarController.java</code>) that returns a list of cool cars to display in the Angular client.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">okta</span><span class="o">.</span><span class="na">developer</span><span class="o">.</span><span class="na">demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.stream.Collectors</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="kd">class</span> <span class="nc">CoolCarController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">CarRepository</span> <span class="n">repository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">CoolCarController</span><span class="o">(</span><span class="n">CarRepository</span> <span class="n">repository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">repository</span> <span class="o">=</span> <span class="n">repository</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/cool-cars"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Car</span><span class="o">&gt;</span> <span class="nf">coolCars</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">isCool</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isCool</span><span class="o">(</span><span class="n">Car</span> <span class="n">car</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="n">car</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"AMC Gremlin"</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                <span class="o">!</span><span class="n">car</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Triumph Stag"</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                <span class="o">!</span><span class="n">car</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Ford Pinto"</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                <span class="o">!</span><span class="n">car</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Yugo GV"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>If you restart your server app and hit <code class="highlighter-rouge">localhost:8080/cool-cars</code> with your browser, or a command-line client, you should see the filtered list of cars.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http localhost:8080/cool-cars
</code></pre></div></div>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w"> </span><span class="mi">200</span><span class="w">
</span><span class="err">Content-Type</span><span class="p">:</span><span class="w"> </span><span class="err">application/json;charset=UTF</span><span class="mi">-8</span><span class="w">
</span><span class="err">Date</span><span class="p">:</span><span class="w"> </span><span class="err">Sun</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="err">Nov</span><span class="w"> </span><span class="mi">2017</span><span class="w"> </span><span class="mi">21</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">22</span><span class="w"> </span><span class="err">GMT</span><span class="w">
</span><span class="err">Transfer-Encoding</span><span class="p">:</span><span class="w"> </span><span class="err">chunked</span><span class="w">

</span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ferrari"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaguar"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Porsche"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lamborghini"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bugatti"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h2 id="create-a-client-with-angular-cli">Create a Client with Angular CLI</h2>

<p>Angular CLI is a command-line utility that can generate an Angular project for you. Not only can it create new projects, but it can also generate code. It’s a convenient tool because it also offers commands that will build and optimize your project for production. It uses webpack under the covers for building. If you want to learn more about webpack, I recommend <a href="https://webpack.academy">webpack.academy</a>.</p>

<p>You can learn the basics of Angular CLI at <a href="https://cli.angular.io">https://cli.angular.io</a>.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/cli.angular.io-1cbe5a231b1eb54dd84c6fd5af3a53e397844cee6c0ab78877fcc4ab46efd72a.png" alt="Angular CLI Homepage" width="800" class="center-image" /></p>

<p>Install the latest version of Angular CLI, which is version 1.5.2.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install <span class="nt">-g</span> @angular/cli@1.5.2
</code></pre></div></div>

<p>Create a new project in the umbrella directory you created. Again, mine is named <code class="highlighter-rouge">okta-spring-boot-2-angular-5-example</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng new client
</code></pre></div></div>

<p>After the client is created, navigate into its directory and install Angular Material.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>client
npm install <span class="nt">--save</span> @angular/material @angular/cdk
</code></pre></div></div>

<p>You’ll use Angular Material’s components to make the UI look better, especially on mobile phones. Install Angular’s animations library, which Angular Material components sometimes leverages.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install <span class="nt">--save</span> @angular/animations
</code></pre></div></div>

<p>If you’d like to learn more about Angular Material, see <a href="https://material.angular.io">https://material.angular.io</a>. It has extensive documentation on its various components and how to use them.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/material.angular.io-ca36f4a452e5d6a21d0a29e095fd33a38bb72cd74ad19f8923bc6bc931713bc9.png" alt="Angular Material Homepage" width="800" class="center-image" /></p>

<h2 id="build-a-car-list-page">Build a Car List Page</h2>

<p>Use Angular CLI to generate a car service that can talk to the Cool Cars API.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng g s car
</code></pre></div></div>

<p>Move the generated files into the <code class="highlighter-rouge">client/src/app/shared/car</code> directory.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir <span class="nt">-p</span> src/app/shared/car
mv src/app/car.service.<span class="k">*</span> src/app/shared/car/.
</code></pre></div></div>

<p>Update the code in <code class="highlighter-rouge">car.service.ts</code> to fetch the list of cars from the server.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/common/http'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/Observable'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CarService</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">():</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'//localhost:8080/cool-cars'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Add this service as a provider in <code class="highlighter-rouge">src/app/app.module.ts</code>. While you’re in there, import <code class="highlighter-rouge">HttpClientModule</code> too.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">CarService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./shared/car/car.service'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClientModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/common/http'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">AppComponent</span><span class="p">,</span>
    <span class="nx">CarListComponent</span>
  <span class="p">],</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">HttpClientModule</span>
  <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CarService</span><span class="p">],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Generate a <code class="highlighter-rouge">car-list</code> component to display the list of cars.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng g c car-list
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">client/src/app/car-list/car-list.component.ts</code> to use the <code class="highlighter-rouge">CarService</code> to fetch the list and set the values in a local <code class="highlighter-rouge">cars</code> variable.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">CarService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../shared/car/car.service'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">CarListComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nl">cars</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">carService</span><span class="p">:</span> <span class="nx">CarService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">carService</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">cars</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">client/src/app/car-list/car-list.component.html</code> to show the list of cars.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h2&gt;</span>Car List<span class="nt">&lt;/h2&gt;</span>

<span class="nt">&lt;div</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let car of cars"</span><span class="nt">&gt;</span>
  {{car.name}}
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">client/src/app/app.component.html</code> to have the <code class="highlighter-rouge">app-car-list</code> element.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"text-align:center"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Welcome to {{title}}!<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;app-car-list&gt;&lt;/app-car-list&gt;</span>
</code></pre></div></div>

<p>Start the client application using <code class="highlighter-rouge">ng serve</code>. Open your favorite browser to http://localhost:4200. You won’t see the
car list just yet, and if you open your developer console, you’ll see why.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/cors-error-bc6d8606419998ee39e569a5f95625dbb56d7e29658e8a44c76ef8d60b93ff00.png" alt="CORS Error" width="800" class="center-image" /></p>

<p>This error happens because you haven’t enabled CORS (Cross-Origin Resource Sharing) on the server.</p>

<h3 id="enable-cors-on-the-server">Enable CORS on the Server</h3>

<p>To enable CORS on the server, add a <code class="highlighter-rouge">@CrossOrigin</code> annotation to the <code class="highlighter-rouge">CoolCarController</code> (in <code class="highlighter-rouge">server/src/main/java/com/okta/developer/demo/CoolCarController.java</code>).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.CrossOrigin</span><span class="o">;</span>
<span class="o">...</span>
<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/cool-cars"</span><span class="o">)</span>
<span class="nd">@CrossOrigin</span><span class="o">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">"http://localhost:4200"</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Car</span><span class="o">&gt;</span> <span class="nf">coolCars</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">isCool</span><span class="o">)</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Also, add it to <code class="highlighter-rouge">CarRepository</code> so you can communicate with its endpoints when adding/deleting/editing.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RepositoryRestResource</span>
<span class="nd">@CrossOrigin</span><span class="o">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">"http://localhost:4200"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">CarRepository</span> <span class="kd">extends</span> <span class="n">JpaRepository</span><span class="o">&lt;</span><span class="n">Car</span><span class="o">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Restart the server, refresh the client, and you should see the list of cars in your browser.</p>

<h2 id="add-angular-material">Add Angular Material</h2>

<p>You’ve already installed Angular Material, to use its components, you simply need to import them. Open <code class="highlighter-rouge">client/src/app/app.module.ts</code> and add imports for animations, and Material’s toolbar, buttons, inputs, lists, and card layout.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">MatButtonModule</span><span class="p">,</span> <span class="nx">MatCardModule</span><span class="p">,</span> <span class="nx">MatInputModule</span><span class="p">,</span> <span class="nx">MatListModule</span><span class="p">,</span> <span class="nx">MatToolbarModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/material'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserAnimationsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/platform-browser/animations'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">HttpClientModule</span><span class="p">,</span>
    <span class="nx">BrowserAnimationsModule</span><span class="p">,</span>
    <span class="nx">MatButtonModule</span><span class="p">,</span>
    <span class="nx">MatCardModule</span><span class="p">,</span>
    <span class="nx">MatInputModule</span><span class="p">,</span>
    <span class="nx">MatListModule</span><span class="p">,</span>
    <span class="nx">MatToolbarModule</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">client/src/app/app.component.html</code> to use the toolbar component.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-toolbar</span> <span class="na">color=</span><span class="s">"primary"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>Welcome to {{title}}!<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/mat-toolbar&gt;</span>

<span class="nt">&lt;app-car-list&gt;&lt;/app-car-list&gt;</span>
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">client/src/app/car-list/car-list.component.html</code> to use the card layout and list component.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-card&gt;</span>
  <span class="nt">&lt;mat-card-header&gt;</span>Car List<span class="nt">&lt;/mat-card-header&gt;</span>
  <span class="nt">&lt;mat-card-content&gt;</span>
    <span class="nt">&lt;mat-list&gt;</span>
      <span class="nt">&lt;mat-list-item</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let car of cars"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">mat-list-avatar</span> <span class="na">src=</span><span class="s">"{{car.giphyUrl}}"</span> <span class="na">alt=</span><span class="s">"{{car.name}}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h3</span> <span class="na">mat-line</span><span class="nt">&gt;</span>{{car.name}}<span class="nt">&lt;/h3&gt;</span>
      <span class="nt">&lt;/mat-list-item&gt;</span>
    <span class="nt">&lt;/mat-list&gt;</span>
  <span class="nt">&lt;/mat-card-content&gt;</span>
<span class="nt">&lt;/mat-card&gt;</span>
</code></pre></div></div>

<p>Modify <code class="highlighter-rouge">client/src/styles.css</code> to specify the theme and icons.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@import</span> <span class="s1">"~@angular/material/prebuilt-themes/pink-bluegrey.css"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s2">'~https://fonts.googleapis.com/icon?family=Material+Icons'</span><span class="p">;</span>

<span class="nt">body</span> <span class="p">{</span>
 <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
 <span class="nl">font-family</span><span class="p">:</span> <span class="n">Roboto</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If you run your client with <code class="highlighter-rouge">ng serve</code> and navigate to http://localhost:4200, you’ll see the list of cars, but no images associated with them.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/car-list-no-images-fd9d13daa76fc04e1a0c67605ae8bbd0efc66a10c1ee30ba9c4ed1fbd61868dc.png" alt="Car List without images" width="800" class="center-image" /></p>

<h2 id="add-animated-gifs-with-giphy">Add Animated GIFs with Giphy</h2>

<p>To add a <code class="highlighter-rouge">giphyUrl</code> property to cars, create <code class="highlighter-rouge">client/src/app/shared/giphy/giphy.service.ts</code> and populate it with the code below.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/common/http'</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">'rxjs/add/operator/map'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GiphyService</span> <span class="p">{</span>

  <span class="c1">// Public beta key: https://github.com/Giphy/GiphyAPI#public-beta-key</span>
  <span class="nx">giphyApi</span> <span class="o">=</span> <span class="s1">'//api.giphy.com/v1/gifs/search?api_key=dc6zaTOxFJmzC&amp;limit=1&amp;q='</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">public</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="kd">get</span><span class="p">(</span><span class="nx">searchTerm</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">apiLink</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">giphyApi</span> <span class="o">+</span> <span class="nx">searchTerm</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">apiLink</span><span class="p">).</span><span class="nx">map</span><span class="p">((</span><span class="nx">response</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">images</span><span class="p">.</span><span class="nx">original</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'https://media.giphy.com/media/YaOxRsmrv9IeA/giphy.gif'</span><span class="p">;</span> <span class="c1">// dancing cat for 404</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Add <code class="highlighter-rouge">GiphyService</code> as a provider in <code class="highlighter-rouge">client/src/app/app.module.ts</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">GiphyService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./shared/giphy/giphy.service'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CarService</span><span class="p">,</span> <span class="nx">GiphyService</span><span class="p">],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Update the code in <code class="highlighter-rouge">client/src/app/car-list/car-list.component.ts</code> to set the <code class="highlighter-rouge">giphyUrl</code> property on each car.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">GiphyService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../shared/giphy/giphy.service'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">CarListComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nl">cars</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">carService</span><span class="p">:</span> <span class="nx">CarService</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">giphyService</span><span class="p">:</span> <span class="nx">GiphyService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">carService</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">cars</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">car</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">cars</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">giphyService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">car</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">url</span> <span class="o">=&gt;</span> <span class="nx">car</span><span class="p">.</span><span class="nx">giphyUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now your browser should show you the list of car names, along with an avatar image beside them.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/car-list-giphy-images-36d3839e382599d3d74724a1f50135108f4f290d1cef6be488066c3b81b790c3.png" alt="Car List with Giphy avatars" width="800" class="center-image" /></p>

<h2 id="add-an-edit-feature">Add an Edit Feature</h2>

<p>Having a list of car names and images is cool, but it’s a lot more fun when you can interact with it! To add an edit feature, start by generating a <code class="highlighter-rouge">car-edit</code> component.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng g c car-edit
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">client/src/app/shared/car/car.service.ts</code> to have methods for adding, removing, and updating cars. These methods
talk to the endpoints provided by the <code class="highlighter-rouge">CarRepository</code> and the <code class="highlighter-rouge">@RepositoryRestResource</code> annotation.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/common/http'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/Observable'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CarService</span> <span class="p">{</span>
  <span class="kr">public</span> <span class="nx">API</span> <span class="o">=</span> <span class="s1">'//localhost:8080'</span><span class="p">;</span>
  <span class="kr">public</span> <span class="nx">CAR_API</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">API</span> <span class="o">+</span> <span class="s1">'/cars'</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">():</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">API</span> <span class="o">+</span> <span class="s1">'/cool-cars'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">get</span><span class="p">(</span><span class="na">id</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">CAR_API</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">id</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">save</span><span class="p">(</span><span class="na">car</span><span class="p">:</span> <span class="nx">any</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="na">result</span><span class="p">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nb">Object</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">car</span><span class="p">[</span><span class="s1">'href'</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">car</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span> <span class="nx">car</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">CAR_API</span><span class="p">,</span> <span class="nx">car</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">remove</span><span class="p">(</span><span class="na">href</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">href</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In <code class="highlighter-rouge">client/src/app/car-list/car-list.component.html</code>, add a link to the edit component. Also, add a button at the bottom
to add a new car.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-card&gt;</span>
  <span class="nt">&lt;mat-card-header&gt;</span>Car List<span class="nt">&lt;/mat-card-header&gt;</span>
  <span class="nt">&lt;mat-card-content&gt;</span>
    <span class="nt">&lt;mat-list&gt;</span>
      <span class="nt">&lt;mat-list-item</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let car of cars"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">mat-list-avatar</span> <span class="na">src=</span><span class="s">"{{car.giphyUrl}}"</span> <span class="na">alt=</span><span class="s">"{{car.name}}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h3</span> <span class="na">mat-line</span><span class="nt">&gt;</span>
          <span class="nt">&lt;a</span> <span class="na">mat-button</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">car-edit</span><span class="err">',</span> <span class="na">car</span><span class="err">.</span><span class="na">id</span><span class="err">]"</span><span class="nt">&gt;</span>{{car.name}}<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/h3&gt;</span>
      <span class="nt">&lt;/mat-list-item&gt;</span>
    <span class="nt">&lt;/mat-list&gt;</span>
  <span class="nt">&lt;/mat-card-content&gt;</span>

  <span class="nt">&lt;button</span> <span class="na">mat-fab</span> <span class="na">color=</span><span class="s">"primary"</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">car-add</span><span class="err">']"</span><span class="nt">&gt;</span>Add<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/mat-card&gt;</span>
</code></pre></div></div>

<p>In <code class="highlighter-rouge">client/src/app/app.module.ts</code>, add routes and import the <code class="highlighter-rouge">FormsModule</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">FormsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/forms'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">RouterModule</span><span class="p">,</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">appRoutes</span><span class="p">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'/car-list'</span><span class="p">,</span> <span class="na">pathMatch</span><span class="p">:</span> <span class="s1">'full'</span> <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="s1">'car-list'</span><span class="p">,</span>
    <span class="na">component</span><span class="p">:</span> <span class="nx">CarListComponent</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="s1">'car-add'</span><span class="p">,</span>
    <span class="na">component</span><span class="p">:</span> <span class="nx">CarEditComponent</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="s1">'car-edit/:id'</span><span class="p">,</span>
    <span class="na">component</span><span class="p">:</span> <span class="nx">CarEditComponent</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="nx">FormsModule</span><span class="p">,</span>
    <span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">appRoutes</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Modify <code class="highlighter-rouge">client/src/app/car-edit/car-edit.component.ts</code> to fetch a car’s information from the id passed on the URL, and to add
methods for saving and deleting.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnDestroy</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Subscription</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/Subscription'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span><span class="p">,</span> <span class="nx">Router</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CarService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../shared/car/car.service'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GiphyService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../shared/giphy/giphy.service'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NgForm</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/forms'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-car-edit'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./car-edit.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./car-edit.component.css'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">CarEditComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">OnDestroy</span> <span class="p">{</span>
  <span class="nl">car</span><span class="p">:</span> <span class="nx">any</span> <span class="o">=</span> <span class="p">{};</span>

  <span class="nl">sub</span><span class="p">:</span> <span class="nx">Subscription</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">route</span><span class="p">:</span> <span class="nx">ActivatedRoute</span><span class="p">,</span>
              <span class="kr">private</span> <span class="nx">router</span><span class="p">:</span> <span class="nx">Router</span><span class="p">,</span>
              <span class="kr">private</span> <span class="nx">carService</span><span class="p">:</span> <span class="nx">CarService</span><span class="p">,</span>
              <span class="kr">private</span> <span class="nx">giphyService</span><span class="p">:</span> <span class="nx">GiphyService</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">params</span><span class="p">[</span><span class="s1">'id'</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">carService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">((</span><span class="na">car</span><span class="p">:</span> <span class="nx">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">car</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">car</span> <span class="o">=</span> <span class="nx">car</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">car</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">car</span><span class="p">.</span><span class="nx">_links</span><span class="p">.</span><span class="nb">self</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">giphyService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">car</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">url</span> <span class="o">=&gt;</span> <span class="nx">car</span><span class="p">.</span><span class="nx">giphyUrl</span> <span class="o">=</span> <span class="nx">url</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Car with id '</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">' not found, returning to list`</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">gotoList</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">ngOnDestroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">gotoList</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">'/car-list'</span><span class="p">]);</span>
  <span class="p">}</span>

  <span class="nx">save</span><span class="p">(</span><span class="na">form</span><span class="p">:</span> <span class="nx">NgForm</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">carService</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">form</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">gotoList</span><span class="p">();</span>
    <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">))</span>
  <span class="p">}</span>

  <span class="nx">remove</span><span class="p">(</span><span class="nx">href</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">carService</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">href</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">gotoList</span><span class="p">();</span>
    <span class="p">},</span> <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Update the HTML in <code class="highlighter-rouge">client/src/app/car-edit/car-edit.component.html</code> to have a form with the car’s name, as well as to display the image from Giphy.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-card&gt;</span>
  <span class="nt">&lt;form</span> <span class="err">#</span><span class="na">carForm=</span><span class="s">"ngForm"</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)="</span><span class="na">save</span><span class="err">(</span><span class="na">carForm</span><span class="err">.</span><span class="na">value</span><span class="err">)"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mat-card-header&gt;</span>
      <span class="nt">&lt;mat-card-title&gt;&lt;h2&gt;</span>{{car.name ? 'Edit' : 'Add'}} Car<span class="nt">&lt;/h2&gt;&lt;/mat-card-title&gt;</span>
    <span class="nt">&lt;/mat-card-header&gt;</span>
    <span class="nt">&lt;mat-card-content&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"href"</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]="</span><span class="na">car</span><span class="err">.</span><span class="na">href</span><span class="err">"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mat-form-field&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">matInput</span> <span class="na">placeholder=</span><span class="s">"Car Name"</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]="</span><span class="na">car</span><span class="err">.</span><span class="na">name</span><span class="err">"</span>
               <span class="na">required</span> <span class="na">name=</span><span class="s">"name"</span> <span class="err">#</span><span class="na">name</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/mat-form-field&gt;</span>
    <span class="nt">&lt;/mat-card-content&gt;</span>
    <span class="nt">&lt;mat-card-actions&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">mat-raised-button</span> <span class="na">color=</span><span class="s">"primary"</span> <span class="na">type=</span><span class="s">"submit"</span>
              <span class="err">[</span><span class="na">disabled</span><span class="err">]="!</span><span class="na">carForm</span><span class="err">.</span><span class="na">form</span><span class="err">.</span><span class="na">valid</span><span class="err">"</span><span class="nt">&gt;</span>Save<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">mat-raised-button</span> <span class="na">color=</span><span class="s">"secondary"</span> <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">remove</span><span class="err">(</span><span class="na">car</span><span class="err">.</span><span class="na">href</span><span class="err">)"</span>
              <span class="err">*</span><span class="na">ngIf=</span><span class="s">"car.href"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>Delete<span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">mat-button</span> <span class="na">routerLink=</span><span class="s">"/car-list"</span><span class="nt">&gt;</span>Cancel<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/mat-card-actions&gt;</span>
    <span class="nt">&lt;mat-card-footer&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"giphy"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"{{car.giphyUrl}}"</span> <span class="na">alt=</span><span class="s">"{{car.name}}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/mat-card-footer&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/mat-card&gt;</span>
</code></pre></div></div>

<p>Put a little padding around the image by adding the following CSS to <code class="highlighter-rouge">client/src/app/car-edit/car-edit.component.css</code>.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.giphy</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Modify <code class="highlighter-rouge">client/src/app/app.component.html</code> and replace <code class="highlighter-rouge">&lt;app-car-list&gt;&lt;/app-car-list&gt;</code> with <code class="highlighter-rouge">&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>. This change is necessary or routing between components won’t work.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-toolbar</span> <span class="na">color=</span><span class="s">"primary"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>Welcome to !<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/mat-toolbar&gt;</span>

<span class="nt">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
</code></pre></div></div>

<p>After you make all these changes, you should be able to add, edit, or delete any cars. Below is a screenshot that shows the list with the add button.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/car-list-add-btn-13802a81db1d200b7fb2efa8e0419965ac634e1a07eaf87b6d2471f00317196d.png" alt="Car List with Add button" width="800" class="center-image" /></p>

<p>The following screenshot shows what it looks like to edit a car that you’ve added.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/car-edit-f79817b80563e2c54a314f96542adc492bd683b812b800622bf8b6accf715885.png" alt="Car Edit Component" width="800" class="center-image" /></p>

<h2 id="add-authentication-with-okta">Add Authentication with Okta</h2>

<p>Add authentication with Okta is a nifty feature you can add to this application. Knowing who the person is can come in handy if you want to add auditing, or personalize your application (with a rating feature for example).</p>

<h3 id="oktas-spring-boot-starter">Okta’s Spring Boot Starter</h3>

<p>On the server side, you can lock things down with the Okta Spring Boot starter. Open <code class="highlighter-rouge">server/pom.xml</code> and add the following dependency.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.okta.spring<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>okta-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.2.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>Now you need to configure the server to use Okta for authentication. You’ll need to create an OIDC app in Okta for that.</p>

<h3 id="create-an-oidc-app-in-okta">Create an OIDC App in Okta</h3>

<p>Log in to your Okta Developer account (or <a href="https://developer.okta.com/signup/">sign up</a> if you don’t have an account) and navigate to <strong>Applications</strong> &gt; <strong>Add Application</strong>. Click <strong>Single-Page App</strong>, click <strong>Next</strong>, and give the app a name you’ll remember. Change all instances of <code class="highlighter-rouge">localhost:8080</code> to <code class="highlighter-rouge">localhost:4200</code> and click <strong>Done</strong>.</p>

<p>Copy the client ID into your <code class="highlighter-rouge">server/src/main/resources/application.properties</code> file. While you’re in there, add a <code class="highlighter-rouge">okta.oauth2.issuer</code> property that matches your Okta domain. For example:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">okta.oauth2.issuer</span><span class="p">=</span><span class="s"><span class="okta-preview-domain"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span></span>/oauth2/default</span>
<span class="py">okta.oauth2.clientId</span><span class="p">=</span><span class="s">{clientId}</span>
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">server/src/main/java/com/okta/developer/demo/DemoApplication.java</code> to enable it as a resource server.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.security.oauth2.config.annotation.web.configuration.EnableResourceServer</span><span class="o">;</span>

<span class="nd">@EnableResourceServer</span>
<span class="nd">@SpringBootApplication</span>
</code></pre></div></div>

<p>After making these changes, you should be able to restart your app and see access denied when you try to navigate to http://localhost:8080.</p>

<p>Unfortunately, you’ll likely see a stack trace with the following error instead.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Caused by: java.lang.ClassNotFoundException:
org.springframework.boot.autoconfigure.security.oauth2.resource.AuthoritiesExtractor
</code></pre></div></div>

<p>This happens because Spring Boot 2.0.0.M6 includes Spring Security 5.0.0.RC1, which doesn’t include Resource Server support. If you’d like to see when this issue is fixed, you can <a href="https://github.com/okta/okta-spring-boot/issues/30">subscribe to the Okta Spring Boot Starter issue #30 on GitHub</a>.</p>

<p>To workaround this problem, you can downgrade the Okta Spring Boot starter to version 0.1.0. Make sure to change its name from <code class="highlighter-rouge">spring-boot</code> to <code class="highlighter-rouge">spring-security</code> too!</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.okta.spring<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>okta-spring-security-starter<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.1.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>You’ll also need to change the property names in <code class="highlighter-rouge">application.properties</code> to be <code class="highlighter-rouge">oauth</code> instead of <code class="highlighter-rouge">oauth2</code>.</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">okta.oauth.issuer</span><span class="p">=</span><span class="s"><span class="okta-preview-domain"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span></span>/oauth2/default</span>
<span class="py">okta.oauth.clientId</span><span class="p">=</span><span class="s">{clientId}</span>
</code></pre></div></div>

<p>Now when you restart your server, you should see a message in your browser like the one below.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/access-denied-acd4c511d873d5e7b61fcb3888a7055394d51b605957c17b412fba33f87d32fc.png" alt="Access Denied" width="800" class="center-image" /></p>

<p>It’s nice that your server is locked down, but now you need to configure your client to talk to it. This is where
Okta’s Angular support comes in handy.</p>

<h3 id="oktas-angular-support">Okta’s Angular Support</h3>

<p>The Okta Angular SDK is a wrapper around <a href="https://github.com/okta/okta-auth-js">Okta Auth JS</a>, which builds on top of OIDC. More information about Okta’s Angular library can be <a href="https://www.npmjs.com/package/@okta/okta-angular">found on npmjs.com</a>.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/okta-angular-46e825c7ba72e124d1e59308a1b338be1e36d4eaad6e57bb6bc4a22387138cbe.png" alt="Okta Angular" width="800" class="center-image" /></p>

<p>To install it, run the following command in the <code class="highlighter-rouge">client</code> directory:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save @okta/okta-angular
</code></pre></div></div>

<p>In <code class="highlighter-rouge">client/src/app/app.module.ts</code>, add a <code class="highlighter-rouge">config</code> variable with the settings for your OIDC app.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">issuer</span><span class="p">:</span> <span class="s1">'<span class="okta-preview-domain"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span></span>/oauth2/default'</span><span class="p">,</span>
  <span class="na">redirectUri</span><span class="p">:</span> <span class="s1">'http://localhost:4200/implicit/callback'</span><span class="p">,</span>
  <span class="na">clientId</span><span class="p">:</span> <span class="s1">'{clientId}'</span>
<span class="p">};</span>
</code></pre></div></div>

<p>In this same file, you’ll also need to add a new route for the <code class="highlighter-rouge">redirectUri</code> that points to the <code class="highlighter-rouge">OktaCallbackComponent</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">OktaCallbackComponent</span><span class="p">,</span> <span class="nx">OktaAuthModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@okta/okta-angular'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">appRoutes</span><span class="p">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">...</span>
  <span class="p">{</span>
    <span class="nl">path</span><span class="p">:</span> <span class="s1">'implicit/callback'</span><span class="p">,</span>
    <span class="nx">component</span><span class="p">:</span> <span class="nx">OktaCallbackComponent</span>
  <span class="p">}</span>
<span class="p">];</span>
</code></pre></div></div>

<p>Next, initialize and import the <code class="highlighter-rouge">OktaAuthModule</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">...</span>
    <span class="nx">OktaAuthModule</span><span class="p">.</span><span class="nx">initAuth</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">})</span>
</code></pre></div></div>

<p>These are the three steps you need to set up an Angular app to use Okta. To make it easy to add a bearer token to HTTP
requests, you can use an <a href="https://angular.io/api/common/http/HttpInterceptor"><code class="highlighter-rouge">HttpInterceptor</code></a>.</p>

<p>Create <code class="highlighter-rouge">client/src/app/shared/okta/auth.interceptor.ts</code> and add the following code to it.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpRequest</span><span class="p">,</span> <span class="nx">HttpHandler</span><span class="p">,</span> <span class="nx">HttpEvent</span><span class="p">,</span> <span class="nx">HttpInterceptor</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/common/http'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/Observable'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">OktaAuthService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@okta/okta-angular'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthInterceptor</span> <span class="kr">implements</span> <span class="nx">HttpInterceptor</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">oktaAuth</span><span class="p">:</span> <span class="nx">OktaAuthService</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="nx">intercept</span><span class="p">(</span><span class="nx">request</span><span class="p">:</span> <span class="nx">HttpRequest</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">next</span><span class="p">:</span> <span class="nx">HttpHandler</span><span class="p">):</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">HttpEvent</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;&gt;</span> <span class="p">{</span>

    <span class="c1">// Only add to localhost requests since Giphy's API fails when the request include a token</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">request</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">clone</span><span class="p">({</span>
        <span class="na">setHeaders</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">Authorization</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">oktaAuth</span><span class="p">.</span><span class="nx">getAccessToken</span><span class="p">().</span><span class="nx">accessToken</span><span class="p">}</span><span class="s2">`</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">next</span><span class="p">.</span><span class="nx">handle</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To register this interceptor, add it as a provider in <code class="highlighter-rouge">client/src/app/app.module.ts</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HTTP_INTERCEPTORS</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/common/http'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthInterceptor</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./shared/okta/auth.interceptor'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[</span><span class="nx">CarService</span><span class="p">,</span> <span class="nx">GiphyService</span><span class="p">,</span>
    <span class="p">{</span><span class="na">provide</span><span class="p">:</span> <span class="nx">HTTP_INTERCEPTORS</span><span class="p">,</span> <span class="na">useClass</span><span class="p">:</span> <span class="nx">AuthInterceptor</span><span class="p">,</span> <span class="na">multi</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Modify <code class="highlighter-rouge">client/src/app/app.component.html</code> to have login and logout buttons.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-toolbar</span> <span class="na">color=</span><span class="s">"primary"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>Welcome to {{title}}!<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"toolbar-spacer"</span><span class="nt">&gt;&lt;/span&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">mat-raised-button</span> <span class="na">color=</span><span class="s">"accent"</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"oktaAuth.isAuthenticated()"</span>
          <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">oktaAuth</span><span class="err">.</span><span class="na">logout</span><span class="err">()"</span><span class="nt">&gt;</span>Logout
  <span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/mat-toolbar&gt;</span>

<span class="nt">&lt;mat-card</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"!oktaAuth.isAuthenticated()"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;mat-card-content&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">mat-raised-button</span> <span class="na">color=</span><span class="s">"accent"</span>
            <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">oktaAuth</span><span class="err">.</span><span class="na">loginRedirect</span><span class="err">()"</span><span class="nt">&gt;</span>Login
    <span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/mat-card-content&gt;</span>
<span class="nt">&lt;/mat-card&gt;</span>

<span class="nt">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
</code></pre></div></div>

<p>You might notice there’s a span with a <code class="highlighter-rouge">toolbar-spacer</code> class. To make that work as expected, update <code class="highlighter-rouge">client/src/app/app.component.css</code> to have the following class.</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.toolbar-spacer</span> <span class="p">{</span>
  <span class="nl">flex</span><span class="p">:</span> <span class="m">1</span> <span class="m">1</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>There’s also a reference to <code class="highlighter-rouge">oktaAuth</code> for checking authenticated status. To make this work, add it as a dependency to the constructor in <code class="highlighter-rouge">client/src/app/app.component.ts</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">OktaAuthService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@okta/okta-angular'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-root'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./app.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./app.component.css'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppComponent</span> <span class="p">{</span>
  <span class="nx">title</span> <span class="o">=</span> <span class="s1">'app'</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">oktaAuth</span><span class="p">:</span> <span class="nx">OktaAuthService</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now if you restart your client, you should see a login button.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/login-button-eb69e30c60443e1e57650c3e8f9f25cd68785659b1e00cc19285d284e6ded147.png" alt="Login Button" width="800" class="center-image" /></p>

<p>Notice that this shows elements from the car-list component. To fix this, you can create a home component and make it the default route.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ng g c home
</code></pre></div></div>

<p>Modify <code class="highlighter-rouge">client/src/app/app.module.ts</code> to update the routes.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">appRoutes</span><span class="p">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'/home'</span><span class="p">,</span> <span class="na">pathMatch</span><span class="p">:</span> <span class="s1">'full'</span><span class="p">},</span>
  <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="s1">'home'</span><span class="p">,</span>
    <span class="na">component</span><span class="p">:</span> <span class="nx">HomeComponent</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Move the HTML for the Login button from <code class="highlighter-rouge">app.component.html</code> to <code class="highlighter-rouge">client/src/app/home/home.component.html</code>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-card&gt;</span>
  <span class="nt">&lt;mat-card-content&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">mat-raised-button</span> <span class="na">color=</span><span class="s">"accent"</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"!oktaAuth.isAuthenticated()"</span>
            <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">oktaAuth</span><span class="err">.</span><span class="na">loginRedirect</span><span class="err">()"</span><span class="nt">&gt;</span>Login
    <span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">mat-raised-button</span> <span class="na">color=</span><span class="s">"accent"</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"oktaAuth.isAuthenticated()"</span>
            <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">car-list</span><span class="err">']"</span><span class="nt">&gt;</span>Car List
    <span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/mat-card-content&gt;</span>
<span class="nt">&lt;/mat-card&gt;</span>
</code></pre></div></div>

<p>Add <code class="highlighter-rouge">oktaAuth</code> as a dependency in <code class="highlighter-rouge">client/src/app/home/home.component.ts</code>.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">OktaAuthService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@okta/okta-angular'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">HomeComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">oktaAuth</span><span class="p">:</span> <span class="nx">OktaAuthService</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Update <code class="highlighter-rouge">client/src/app/app.component.html</code>, so the Logout button redirects back to home when it’s clicked.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mat-toolbar</span> <span class="na">color=</span><span class="s">"primary"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>Welcome to {{title}}!<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"toolbar-spacer"</span><span class="nt">&gt;&lt;/span&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">mat-raised-button</span> <span class="na">color=</span><span class="s">"accent"</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"oktaAuth.isAuthenticated()"</span>
          <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">oktaAuth</span><span class="err">.</span><span class="na">logout</span><span class="err">()"</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">home</span><span class="err">']"</span><span class="nt">&gt;</span>Logout
  <span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/mat-toolbar&gt;</span>

<span class="nt">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
</code></pre></div></div>

<p>Now you should be able to open your browser to http://localhost:4200 and click on the Login button. If you’ve configured everything correctly, you’ll be redirected to Okta to log in.</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/okta-login-4466b6d3d869fa42ea711923b4618a400febcff62433c7a3ac5f5a72add0f29e.png" alt="Okta Login" width="800" class="center-image" /></p>

<p>Enter the credentials you used to sign up for an account, and you should be redirected back to your app. However, your
list of cars won’t load because of a CORS error. This happens because Spring’s <code class="highlighter-rouge">@CrossOrigin</code> doesn’t work well with
Spring Security.</p>

<p>To fix this, add a bean to <code class="highlighter-rouge">DemoApplication.java</code> that handles CORS.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.boot.web.servlet.FilterRegistrationBean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.Ordered</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.cors.CorsConfiguration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.cors.UrlBasedCorsConfigurationSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.filter.CorsFilter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>

<span class="o">...</span>

<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">FilterRegistrationBean</span> <span class="nf">simpleCorsFilter</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">UrlBasedCorsConfigurationSource</span> <span class="n">source</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UrlBasedCorsConfigurationSource</span><span class="o">();</span>
    <span class="n">CorsConfiguration</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CorsConfiguration</span><span class="o">();</span>
    <span class="n">config</span><span class="o">.</span><span class="na">setAllowCredentials</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="n">config</span><span class="o">.</span><span class="na">setAllowedOrigins</span><span class="o">(</span><span class="n">Collections</span><span class="o">.</span><span class="na">singletonList</span><span class="o">(</span><span class="s">"http://localhost:4200"</span><span class="o">));</span>
    <span class="n">config</span><span class="o">.</span><span class="na">setAllowedMethods</span><span class="o">(</span><span class="n">Collections</span><span class="o">.</span><span class="na">singletonList</span><span class="o">(</span><span class="s">"*"</span><span class="o">));</span>
    <span class="n">config</span><span class="o">.</span><span class="na">setAllowedHeaders</span><span class="o">(</span><span class="n">Collections</span><span class="o">.</span><span class="na">singletonList</span><span class="o">(</span><span class="s">"*"</span><span class="o">));</span>
    <span class="n">source</span><span class="o">.</span><span class="na">registerCorsConfiguration</span><span class="o">(</span><span class="s">"/**"</span><span class="o">,</span> <span class="n">config</span><span class="o">);</span>
    <span class="n">FilterRegistrationBean</span> <span class="n">bean</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FilterRegistrationBean</span><span class="o">(</span><span class="k">new</span> <span class="n">CorsFilter</span><span class="o">(</span><span class="n">source</span><span class="o">));</span>
    <span class="n">bean</span><span class="o">.</span><span class="na">setOrder</span><span class="o">(</span><span class="n">Ordered</span><span class="o">.</span><span class="na">HIGHEST_PRECEDENCE</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">bean</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Restart your server and celebrate when it all works! 🎉</p>

<p><img src="/assets/blog/spring-boot-2-angular-5/success-at-last-349214a977b4ab083a5bab420125fb4d7c28eec4b11e3a8b2ca896b5338c1ab1.png" alt="Success!" width="800" class="center-image" /></p>

<p>You can see the full source code for the application developed in this tutorial on GitHub at <a href="https://github.com/oktadeveloper/okta-spring-boot-2-angular-5-example">https://github.com/oktadeveloper/okta-spring-boot-2-angular-5-example</a>.</p>

<h2 id="learn-more-about-spring-boot-and-angular">Learn More about Spring Boot and Angular</h2>

<p>This article shows you how to use Okta’s Spring Boot support. If you’d like to learn more about this project, I encourage
you to <a href="https://github.com/okta/okta-spring-boot">star it on GitHub</a>.</p>

<p>It also uses Okta’s Angular SDK, which is something we haven’t written about on this blog before. To learn more about this project, see <a href="https://www.npmjs.com/package/@okta/okta-angular">https://www.npmjs.com/package/@okta/okta-angular</a> or <a href="https://github.com/okta/okta-oidc-js/tree/master/packages/okta-angular">check it out on GitHub</a>.</p>

<p>I’ve written a number of Spring Boot and Angular tutorials in the past, and I’ve recently updated them for Angular 5.</p>

<ul>
  <li><a href="/blog/2017/04/26/bootiful-development-with-spring-boot-and-angular">Bootiful Development with Spring Boot and Angular</a></li>
  <li><a href="/blog/2017/09/19/build-a-secure-notes-application-with-kotlin-typescript-and-okta">Build a Secure Notes Application with Kotlin, TypeScript, and Okta</a></li>
  <li><a href="/blog/2017/04/17/angular-authentication-with-oidc">Angular Authentication with OpenID Connect and Okta in 20 Minutes</a></li>
  <li><a href="/blog/2017/03/27/angular-okta-sign-in-widget">Build an Angular App with Okta’s Sign-In Widget in 15 Minutes</a></li>
</ul>

<p>If you have any questions, please don’t hesitate to leave a comment below, or ask us on our <a href="https://devforum.okta.com/">Okta Developer Forums</a>. Follow us <a href="https://twitter.com/oktadev">on Twitter</a> if you want to be notified when we publish new blog posts.</p>


    </div>

    
    <div id="disqus">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_title = 'Build a Basic CRUD App with Angular 5.0 and Spring Boot 2.0';
            var disqus_url = 'https://developer.okta.com/blog/2017/12/04/basic-crud-angular-and-spring-boot';

            (function () {
                var dsq = document.createElement('script');
                dsq.async = true;
                dsq.type = 'text/javascript';
                dsq.src = '//oktadevblog.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>
          <noscript>
              Please enable JavaScript to view the
              <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus</a>.
         </noscript>
    </div>
    
</article>

		
</section>

		
	</div><footer class="Footer">
    <div class="Wrap">

        <div class="Row">

            <div class="Column--3 Column--medium-6 Column--xSmall-12">
                <a href="https://www.okta.com/" target="_blank" rel="noopener noreferrer">
                    <div class="Logo">
                        <img src="https://developer.okta.com/sites/all/themes/developer/images/logo-footer.png" alt="Okta">
                    </div>
                    <p>Visit okta.com</p>
                </a>
            </div>

            <div class="Column--3 Column--medium-12 Column--xSmall-12">
                <h4>Social</h4>
                <ul class="Footer-links Footer-links--social">
                    <li><a class="Footer-links--github" target="_blank" rel="noopener noreferrer" href="http://github.com/oktadeveloper">Github</a></li>
                    <li><a class="Footer-links--twitter" target="_blank" rel="noopener noreferrer" href="http://twitter.com/OktaDev">Twitter</a></li>
                    <li><a class="Footer-links--forum" target="_blank" rel="noopener noreferrer" href="https://devforum.okta.com/">Forum</a></li>
                    <li><a class="Footer-links--rss" target="_blank" rel="noopener noreferrer" href="http://feeds.feedburner.com/OktaBlog">RSS Blog</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>More Info</h4>
                <ul class="Footer-links">
                    <li><a target="_blank" href="https://developer.okta.com/integrate-with-okta/">Integrate with Okta</a></li>
                    <li><a href="/blog/">Blog</a></li>
                    <li><a href="/docs/change-log/">Change Log</a></li>
                    <li><a href="/3rd_party_notices/">3rd Party Notices</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>Contact &amp; Legal</h4>
                <ul class="Footer-links">
                    <li><a href="https://developer.okta.com/contact/">Contact Sales</a></li>
                    <li><a target="_blank" rel="noopener noreferrer" href="mailto:developers@okta.com">Contact Support</a></li>
                    <li><a href="https://developer.okta.com/terms/">Terms &amp; Conditions</a></li>
                    <li><a href="https://developer.okta.com/privacy/">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script type="text/javascript" src="/assets/master-aa397c892d9083236c5cb20732dde679021b9236c8142ce78177b8b184567a02.js"></script>
    <script type="text/javascript" src="/assets/myOkta-911cbafbbe079b7a5522d9cbe15bd2a5f44e1582531e88393934bec69f97696b.js"></script>
    
    
    
    
      <script type="text/javascript" src="/assets/blog-6e32dad27404131cc8630a5282264bed2ab4c08c91ac86fa496b75c53aa4f681.js"></script>
    

  <!-- START Post Footer -->
  
  <!-- START Google Tag Manager -->
  <!-- https://support.google.com/tagmanager/answer/6103696?hl=en -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- END Google Tag Manager -->
  <!-- START Google Remarketing Tag -->
  <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1006913831;
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
  </script>
  <div style="display:none;"><script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script></div>
  <noscript><div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"></div></noscript>
  <!-- END Google Remarketing Tag -->
  <!-- START Crazy Egg Tracking -->
  <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
  <!-- END Crazy Egg Tracking -->

  <!-- END Post Footer -->
</body>
</html>
