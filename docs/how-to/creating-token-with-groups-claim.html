<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
  <script>
    var searchDomain = 'https://developer.okta.com';
    var isProduction = window.location.hostname === 'developer.okta.com';
    if (isProduction) {
      // TypeKit
      (function(d) {
        var config = {
          kitId: 'jff5neq',
          scriptTimeout: 3000,
          async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/bwf-loadingb/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
      })(document);

      // Google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-15777010-3', 'auto');
      ga('send', 'pageview');

      // START Google Tag Manager
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-TJ45R6');
      // END Google Tag Manager
    }
	</script>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
 	

  <link type="text/css" rel="stylesheet" href="https://developer.okta.com/sites/all/themes/developer/css/master.css" media="all" />
  <meta class="swiftype" name="title" data-type="string" content="Create a Token with a Groups Claim Using the App Profile | Okta Developer" />
  <meta class="swiftype" name="summary" data-type="string" content="How to use the app profile to create an ID token or access token that contains a groups claim" />

  <link type="text/css" rel="stylesheet" href="/assets/animate-ec43d72c3ed45e08a460b8a2966d8dba6006aebfa0530935c3973fa493a8771f.css">
  <link type="text/css" rel="stylesheet" href="/assets/okta-43dc5927557b8154c15ef656cdd0486491b6492bc32fff1149c297de0f054cbe.css">
  
  
  <title>Create a Token with a Groups Claim Using the App Profile | Okta Developer</title>
  <meta name="description" content="How to use the app profile to create an ID token or access token that contains a groups claim">
  <link rel="canonical" href="https://developer.okta.com/docs/how-to/creating-token-with-groups-claim"  data-proofer-ignore>
  <link rel="alternate" type="application/rss+xml" title="Okta Developer" href="https://developer.okta.com/feed.xml"><!-- GA -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon/manifest.json">
  <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#21313a">
  <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
  <div class="Page create-a-token-with-a-groups-claim-using-the-app-profile Page--docs-page">
    <!-- START Header -->
    




<header class="Header is-fixed">

  <div class="Wrap">

    <a class="Logo" href="https://developer.okta.com">
      <svg version="1.1" id="OktaLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 431.9 151.4" style="enable-background:new 0 0 431.9 151.4;" xml:space="preserve"><g><g><g><path d="M102.2,41.4c-21,0-38.1,17.1-38.1,38.1s17.1,38.1,38.1,38.1s38.1-17.1,38.1-38.1l0,0C140.3,58.5,123.2,41.4,102.2,41.4z M102.2,98.5c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19c0.1,10.5-8.4,19-18.9,19.1C102.3,98.6,102.2,98.6,102.2,98.5L102.2,98.5z"/><path d="M169.1,92.3c0-1.9,1.5-3.4,3.4-3.4c0.9,0,1.8,0.4,2.4,1c9.5,9.7,25.3,26.3,25.4,26.4c0.4,0.5,0.8,0.8,1.4,0.9l1.6,0.2h17.2c1.8,0,3.3-1.4,3.4-3.2c0-0.8-0.3-1.5-0.8-2.2l-28.6-29.2l-1.5-1.5c-3.2-3.9-2.9-5.4,0.8-9.3l22.6-25.1c1.1-1.4,0.8-3.5-0.6-4.6c-0.6-0.4-1.3-0.7-2-0.7h-17c-0.6,0.2-1.1,0.5-1.5,0.9L175,64.4c-1.3,1.4-3.4,1.5-4.8,0.2c-0.7-0.6-1.1-1.5-1.1-2.5V18.9c0-1.7-1.3-3-3-3c-0.1,0-0.2,0-0.3,0h-12.7c-2.2,0-3.3,1.5-3.3,2.8v95.8c0,2.2,1.8,2.8,3.3,2.8h12.7c1.7,0.1,3.2-1.2,3.3-2.9c0,0,0,0,0,0V92.3z"/><path d="M273,114l-1.4-12.8c-0.2-1.7-1.7-2.9-3.4-2.7c0,0,0,0-0.1,0l-2.9,0.2c-10.1,0-18.5-7.9-19-18c0-0.3,0-0.7,0-1V64.2c-0.1-2,1.5-3.6,3.5-3.7c0,0,0,0,0,0h17c1.7-0.1,3.1-1.5,3-3.2c0,0,0-0.1,0-0.1v-12c0-2.3-1.5-3.6-2.8-3.6h-17.1c-1.9,0.1-3.5-1.5-3.6-3.4c0,0,0,0,0,0V18.9c-0.1-1.7-1.5-3.1-3.2-3c0,0-0.1,0-0.1,0h-12.7c-1.6-0.1-3,1.1-3.1,2.7c0,0.1,0,0.1,0,0.2c0,0,0,61.7,0,62c0.5,21,17.9,37.6,38.9,37c1.4,0,2.9-0.2,4.3-0.3C272,117.2,273.2,115.7,273,114z"/></g><path d="M364.7,98c-10.8,0-12.4-3.8-12.4-18.3l0,0V44.8c0-1.8-1.4-3.2-3.2-3.2c0,0-0.1,0-0.1,0h-12.8c-1.8,0-3.2,1.4-3.3,3.2v1.6C314.6,36,291.3,42.5,281,60.8c-10.4,18.3-3.9,41.6,14.4,51.9c14,7.9,31.4,6.2,43.5-4.2c3.6,5.5,9.3,9.1,18.3,9.1c1.5,0,9.7,0.3,9.7-3.5v-13.6C367,99.2,366,98.1,364.7,98z M314.2,98.6c-10.5,0-19-8.5-19-19s8.5-19,19-19s19,8.5,19,19l0,0C333.2,90.1,324.7,98.6,314.2,98.6z"/></g><path d="M19.4,74c2.2-1.9,4.1-4.1,5.7-6.6c3.5-5.3,5.4-11.5,5.2-17.9V27c0-4.9,0.9-8.4,2.7-10.5c1.8-2.1,4.8-3,9.2-3h12.6c1.2,0,2.1-0.9,2.2-2.1l0,0V2.2C57,1,56,0,54.8,0c0,0,0,0,0,0H41.5c-7.8,0-12.9,2.1-18,7.6s-7.1,12.3-7.1,21.7v14.2c0,2.2-0.1,4-0.2,5.7v2.2c-0.5,3.2-1.8,6.2-3.6,8.9C9.4,64.7,5.1,70.9,0.9,74l0,0l-0.3,0.3l0,0l-0.2,0.3H0.2v0.3l0,0c-0.1,0.3-0.1,0.7,0,1l0,0v0.3h0.1l0.2,0.3l0,0l0.3,0.3l0,0c4.2,3.1,8.5,9.3,11.3,13.7c1.8,2.7,3.1,5.7,3.6,8.9v2.2c0.1,1.6,0.2,3.5,0.2,5.7v14.3c0,9.4,2.4,16.7,7.1,21.7s10.2,7.6,18,7.6h13.8c1.2,0,2.2-1,2.2-2.2V140l0,0c0-1.2-1-2.2-2.2-2.2H42.2c-4.4,0-7.5-1-9.2-3s-2.7-5.6-2.7-10.5v-22.4c0.2-6.4-1.7-12.6-5.2-17.9c-1.6-2.5-3.5-4.7-5.7-6.6l0,0c-0.9-0.7-1.1-2-0.4-2.9C19.2,74.3,19.3,74.2,19.4,74L19.4,74z"/><path d="M412.5,74c-2.2-1.9-4.1-4.1-5.7-6.6c-3.5-5.3-5.4-11.5-5.2-17.9V27c0-4.9-0.9-8.4-2.7-10.5s-4.8-3-9.2-3h-12.6c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0l0,0V2.2c0-1.2,1-2.2,2.2-2.2c0,0,0,0,0,0h13.4c7.8,0,12.9,2.1,18,7.6s7.1,12.3,7.1,21.7v14.2c0,2.2,0.1,4,0.2,5.7v2.2c0.5,3.2,1.8,6.2,3.6,8.9c2.8,4.5,7.1,10.7,11.3,13.7l0,0l0.3,0.3l0,0l0.2,0.3h0.1v0.3l0,0c0.1,0.3,0.1,0.7,0,1l0,0v0.3h-0.1l-0.2,0.3l0,0l-0.3,0.3l0,0c-4.2,3.1-8.5,9.3-11.3,13.7c-1.8,2.7-3.1,5.7-3.6,8.9v2.2c-0.1,1.6-0.2,3.5-0.2,5.7v14.3c0,9.4-2.4,16.7-7.1,21.7s-10.2,7.6-18,7.6h-13.4c-1.2,0-2.2-1-2.2-2.2c0,0,0,0,0,0V140l0,0c0-1.2,1-2.2,2.2-2.2l0,0h12.7c4.4,0,7.5-1,9.2-3s2.7-5.6,2.7-10.5v-22.4c-0.2-6.3,1.6-12.6,5.1-17.9c1.6-2.5,3.5-4.7,5.7-6.6l0,0c0.9-0.7,1.1-2,0.4-2.9C412.7,74.3,412.6,74.2,412.5,74L412.5,74z"/></g></svg>
    </a>

    <nav class="Header-nav PrimaryNav">
      <ul class="menu">
        <li class="first expanded">
          <a href="https://developer.okta.com/product/">Product</a>
          <ul class="menu">
            <li class="first leaf"><a href="https://developer.okta.com/product/">Overview</a></li>
            <li class="leaf"><a href="https://developer.okta.com/product/authentication/">Authentication</a></li>
            <li class="leaf"><a href="https://developer.okta.com/product/authorization/">Authorization</a></li>
            <li class="last leaf"><a href="https://developer.okta.com/product/user-management/">User Management</a></li>
          </ul>
        </li>
        <li class="leaf">
          <a href="https://developer.okta.com/pricing/">Pricing</a>
        </li>
        <li class="leaf">
          <a href="/blog/">Blog</a>
        </li>
        <li class="leaf">
          <a href="/documentation/" class="active">Docs</a>
        </li>
        <li class="last expanded">
          <span class="nolink">Support</span>
          <ul class="menu">
            <li class="first leaf"><a href="https://devforum.okta.com/">Okta Developer Forums</a></li>
            <li class="last leaf"><a href="mailto:developers@okta.com">developers@okta.com</a></li>
          </ul>
        </li>
      </ul>
      <a class="PrimaryNav-toggle" href="#">
        <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g class="MenuIcon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                <path d="M1,16 L19,16" class="MenuIcon-line1" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,4 L19,4" class="MenuIcon-line2" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line3" stroke="#FFFFFF" stroke-width="2"></path>
                <path d="M1,10 L19,10" class="MenuIcon-line4" stroke="#FFFFFF" stroke-width="2"></path>
            </g>
        </svg>
        <svg class="CloseIcon" width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g id="ALl-Boards" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="Desktop" transform="translate(-915.000000, -235.000000)" fill="#FFFFFF">
              <g id="Search-bar-Active" transform="translate(30.000000, 26.000000)">
                <polygon id="Icon/Cross" points="901 210.6 899.4 209 893 215.4 886.6 209 885 210.6 891.4 217 885 223.4 886.6 225 893 218.6 899.4 225 901 223.4 894.6 217"></polygon>
              </g>
            </g>
          </g>
        </svg>
      </a>

      <div class="PrimaryNav-cta">
        <a target="_blank" rel="noopener noreferrer" href="https://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3Dhttps://login.okta.com/?SAMLRequest=fc%2B7CsJAEAXQXvAflu1NNJUMeZBGELTx1a%2FrYILJTtyZGD%2FfSBRiYzlw77lMnD3rSj3Qc0ku0YtgrhU6S5fSXRN9PKxmS52l00nMpq6iBvJWCrfDe4ss6vStRe9aDzmGIZfo1jsgwyWDMzUyiIV9vt1AH4XGk5ClSvewUgMNa%2BYW%2FVj5jxhm9NLP67QQaSAMu64L6CYmsFSHlnzT4ZlLwTgcL6Sf8%2FeX9AU%3D" class="Button--redOutline">Login</a>
        <a href="https://developer.okta.com/signup/" class="Button--red">Sign up</a>
      </div>

      <a class="SearchIcon" href="#"></a>
      <form id="form_search" class="SearchBar Formisimo_clocked_69929" method="get" action="https://developer.okta.com/search/" name="form_search" __bizdiag="-784164280" __biza="WJ__">
        <input type="text" name="stq" autocomplete="off" id="st-search-input-auto" class="st-search-input" placeholder="Search">
        <input type="submit" name="submit" value="GO">
      </form>

    </nav>

  </div>

</header>

    <!-- END Header -->
     <!-- START Page Center w/Sub Nav & Content -->
    <section class="PageContent DynamicSidebar has-tableOfContents">
      <!-- START Fixed sidebar --><aside class="Sidebar">
  <h2 class="Sidebar-location Sidebar-toggle h6">Navigation</h2>
  <div class="Sidebar-close Sidebar-toggle"></div>
  <div>
    <h3 class="Sidebar-title"><a href = "/authentication-guide/">Authentication Guide</a></h3>
    <ul class="Sidebar-nav">
      <li>
        <a href = "/authentication-guide/auth-overview/">OAuth 2.0 Overview</a>
        
      </li>
      <li>
        <a href = "/authentication-guide/implementing-authentication/">Implementing OAuth 2.0</a>
        
      </li>
      <li>
      <a href = "/authentication-guide/social-login/">Social Login</a>
      
      </li>
      <li>
      <a href = "/authentication-guide/saml-login/">SAML Login</a>
      
      </li>
      <li>
      <a href = "/authentication-guide/tokens/">Working With Tokens</a>
      
      </li>
      <!--
      <li>
      <a href = "/authentication-guide/custom-login/">Customizing Login</a>
      
      </li>
    -->
    </ul>

    <h3 class="Sidebar-title">Use Cases</h3>
    <ul class="Sidebar-nav">
      <li>
        <a href="/use_cases/authentication/">Authentication</a>
      </li>
      <li>
        <a href="/use_cases/mfa/">Multi-Factor Authentication</a>
      </li>
      <li>
        <a href="/use_cases/api_access_management/">API Access Management</a>
      </li>
      <li>
        <a href="/use_cases/integrate_with_okta/">Integrate with Okta</a>
      </li>
    </ul>

    <h3 class="Sidebar-title">Reference</h3>
    <ul class="Sidebar-nav">
      <li>
        <a href="/docs/api/getting_started/api_test_client">Getting Started</a>
      </li>
      <li>
        <a href="/docs/api/resources/authn">Authentication API</a>
      </li>
      <li>
        <a href="/docs/api/resources/apps">Management API</a>
      </li>
      <li>
        <a href="/reference/error_codes/">Error Codes</a>
      </li>
      <li>
        <a href="/reference/okta_expression_language/">Okta Expression Language</a>
      </li>
      <li>
        <a href="/docs/change-log/index.html">Change Log</a>
      </li>
    </ul>

    <h3 class="Sidebar-title">Standards</h3>
    <ul class="Sidebar-nav">
      
      
      
      <li>
        <a href="/standards/OAuth/">OAuth 2.0 and Okta</a>
      </li>
      
      
      <li>
        <a href="/standards/OIDC/">OpenID Connect and Okta</a>
      </li>
      
      
      <li>
        <a href="/standards/SAML/">SAML</a>
      </li>
      
      
      
      
      <li>
        <a href="/standards/SCIM/">SCIM Provisioning with Lifecycle Management</a>
      </li>
      
    </ul>

    <script>
      if (document.querySelectorAll("#Sidebar_Resources .is-active").length) {
        document.getElementById('Sidebar_Resources').classList.remove('Sidebar-hide');
      }

      if (document.querySelectorAll("#Sidebar_References .is-active").length) {
        document.getElementById('Sidebar_References').classList.remove('Sidebar-hide');
      }
    </script>
  </div>
</aside>
<!-- END Fixed sidebar -->
      <!-- START Page Content -->
      <div class="PageContent-main" id="docs-body">
        <a id="edit-link" href="https://github.com/okta/okta.github.io/edit/source/_source/_docs/how-to/creating-token-with-groups-claim.md" data-proofer-ignore>Edit Page</a>
      <h2 id="how-to-create-a-token-with-a-groups-claim-using-the-app-profile">How to Create a Token with a Groups Claim Using the App Profile</h2>

<p>You can add a groups claim for any combination of application groups and user groups into ID tokens to perform SSO using Okta Authorization Server, or ID tokens and access tokens to perform authentication and authorization using Custom Authorization Server (API Access Management required).
This process optionally uses Okta’s flexible app profile, which accepts any JSON-compliant content, to create a whitelist of groups
that can then easily be referenced. This is especially useful if you have a large number of groups to whitelist or otherwise
need to set group whitelists on a per-application basis.</p>

<h3 id="before-you-start">Before You Start</h3>

<p>Perform the following two tasks before you start for either Okta Authorization Server or Custom Authorization Server.</p>

<ul>
  <li>Create an OAuth 2.0 or OpenID Connect client with the <a href="/docs/api/resources/apps#request-example-8">Apps API</a>. In the instruction examples, the client ID is <code class="highlighter-rouge">0oabskvc6442nkvQO0h7</code>.</li>
  <li>Create the groups that you wish to configure in the groups claim. In the instruction examples, we’re configuring the <code class="highlighter-rouge">WestCoastDivision</code> group, and the group ID is <code class="highlighter-rouge">00gbso71miOMjxHRW0h7</code>.</li>
</ul>

<p>Now use the instructions for your chosen authorization server to create a groups claim, assign a group whitelist to your client app, and configure a groups claim that references the whitelist:</p>

<ul>
  <li><a href="#create-a-token-with-groups-claim-okta-authorization-server">Create a Token with Groups Claim and Okta Authorization Server</a></li>
  <li><a href="#create-a-token-with-groups-claim-custom-authorization-server">Create a Token with Groups Claim and Custom Authorization Server</a></li>
</ul>

<h3 id="create-a-token-with-groups-claim-okta-authorization-server">Create a Token with Groups Claim (Okta Authorization Server)</h3>

<p>Use this procedure if you have the Okta Authorization Server, not the <code class="highlighter-rouge">default</code> or other Custom Authorization Server.</p>

<h4 id="step-one-get-the-group-ids">Step One: Get the Group IDs</h4>

<p>Send a request to <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups</code> and collect the IDs for all the groups you’ll want to whitelist.</p>

<p>Request Example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: SSWS ${api_token}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="s2">"<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups"</span>
</code></pre></div></div>

<p>Response Example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00gbso71miOMjxHRW0h7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-25T21:15:48.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-25T21:15:48.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastMembershipUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-25T21:16:07.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectClass"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"okta:user_group"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA_GROUP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WestCoastDivision"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Employees West of the Rockies"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://op1static.oktacdn.com/assets/img/logos/groups/okta-medium.d7fb831bc4e7e1a5d8bd35dfaf405d9e.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://op1static.oktacdn.com/assets/img/logos/groups/okta-large.511fcb0de9da185b52589cb14d581c2c.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups/00gbso71miOMjxHRW0h7/users"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups/00gbso71miOMjxHRW0h7/apps"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>This example uses one <code class="highlighter-rouge">groupId</code> for simplicity’s sake.</p>

<h4 id="step-two-add-list-of-groups-to-profile-of-client-app">Step Two: Add List of Groups to Profile of Client App</h4>

<p>If you only have one or two groups to specify, simply add the group IDs to the first parameter of the <code class="highlighter-rouge">getFilteredGroups</code> function described in the next step.
However, if you have a lot of groups to whitelist, you can put the group IDs in the client app’s profile property bag: <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/apps/:aid</code>.
The following example names the group whitelist <code class="highlighter-rouge">groupwhitelist</code>, but you can name it anything.</p>

<p>Request Example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> PUT <span class="se">\</span>
  https://<span class="o">{</span>yourOktaDomain<span class="o">}</span>.com/api/v1/apps/0oabskvc6442nkvQO0h7 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: SSWS ${api_token}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "oidc_client",
    "label": "Sample Client",
    "status": "ACTIVE",
    "signOnMode": "OPENID_CONNECT",
    "credentials": {
      "oauthClient": {
        "token_endpoint_auth_method": "client_secret_post"
      }
    },
    "settings": {
      "oauthClient": {
        "client_uri": "http://localhost:8080",
        "logo_uri": "http://developer.okta.com/assets/images/logo-new.png",
        "redirect_uris": [
          "https://example.com/oauth2/callback",
          "myapp://callback"
        ],
        "response_types": [
          "token",
          "id_token",
          "code"
        ],
        "grant_types": [
          "implicit",
          "authorization_code"
        ],
        "application_type": "native"
      }
    },
    "profile": {
      "groupwhitelist": [
        "00gbso71miOMjxHRW0h7"
      ]
    }
  }'</span>
</code></pre></div></div>

<p>You can add application groups, user groups, or both to the group whitelist, specified as an array of IDs.</p>

<p>To use the group whitelist for every client that gets this claim in a token, put the attribute name of the whitelist in the first parameter of the <code class="highlighter-rouge">getFilteredGroups</code> function described in the next step.</p>

<h4 id="step-three-configure-a-custom-claim-for-your-groups-okta-authorization-server">Step Three: Configure a Custom Claim for Your Groups (Okta Authorization Server)</h4>

<p>For the Okta Authorization Server, you can only create an ID token with a groups claim, not an access token.</p>

<blockquote>
  <p>This step requires the Okta user interface. If you are using the Developer Console, select the drop-down control in the left side of the top banner to switch to Classic UI for Step Three.</p>
</blockquote>

<p>a. In the Okta user interface, navigate to the Sign On tab of the client application you are configuring, and click the <strong>Edit</strong> button in the Open ID Connect ID Token section.</p>

<p>b. In <strong>Groups claim type</strong>, choose <strong>Expression</strong>.</p>

<p>c. In <strong>Group claims filter</strong>, leave the default name <code class="highlighter-rouge">groups</code> or change it if you wish.</p>

<p>d. In <strong>Groups claim expression</strong>, add this expression: <code class="highlighter-rouge">getFilteredGroups(app.profile.groupwhitelist, "group.name", 40)</code>.</p>

<h4 id="step-four-send-a-test-request">Step Four: Send a Test Request</h4>

<p>To obtain a token with the configured groups claim, send a request for an ID token that includes the <code class="highlighter-rouge">groups</code> claim set in step 3.c. as a scope to <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/oauth2/v1/authorize</code>, as illustrated in the following example.</p>

<p>Request Example for Okta Authorization Server:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="s2">"<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/oauth2/v1/authorize?client_id=0oabskvc6442nkvQO0h7
  &amp;response_type=id_token
  &amp;response_mode=fragment&amp;scope=openid%20groups
  &amp;redirect_uri=https%3A%2F%2Fexample.com
  &amp;state=myState&amp;nonce=</span><span class="k">${</span><span class="nv">yourNonceValue</span><span class="k">}</span><span class="s2">' </span><span class="se">\</span><span class="s2">
</span></code></pre></div></div>

<h4 id="step-five-decode-the-jwt-to-verify">Step Five: Decode the JWT to Verify</h4>

<p>Decode the JWT in the response to see that the groups are in the token. For example, this JWK contains the <code class="highlighter-rouge">groups</code> claim in an ID token:</p>

<pre><code class="language-JSON">eyJraWQiOiJiS0U0czM3d01tQWZ5ZzQtVFJQcVg1YW50blE1ajBuNFJKcE9nSl9zT0JVIiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiIwMHU1dDYwaWxvT0hOOXBCaTBoNyIsInZlciI6MSwiaXNzIjoiaHR0cHM6Ly9teXN0aWNvcnAub2t0YXByZXZpZXcuY29tIiwiYXVkIjoiMG9hYnNrdmM2NDQybmt2UU8waDciLCJpYXQiOjE1MTQ0OTc3ODEsImV4cCI6MTUxNDUwMTM4MSwianRpIjoiSUQua0FlMWFzU08wM00walp0Y2ZHZGtpWGwwUW9LRHE5aHl3OE1VUU1UNGwtWSIsImFtciI6WyJwd2QiXSwiaWRwIjoiMDBvNXQ2MGlsM1V6eUllNXYwaDciLCJub25jZSI6IjQ1YzExMDJiLTM0MmUtNGZjMC04ZDllLWM0NTY0MmFlOWFkOCIsImF1dGhfdGltZSI6MTUxNDQ5NjM1MCwiZ3JvdXBzIjpbIldlc3RDb2FzdERpdmlzaW9uIl19.ACKbJZ-lbGtgBAQDhamq7K9WJzHS0WySN0R2LXSkBahWWVMU1W-oTh2xDuHmyQv6HZpk-V4epnk-OItRBQb214NsRG8AJGn5n3QGYp5xPWVXXQ_hFZSro4br6Rdn_U8iZebqs6EXpGhxG7tN9VEgB-SkAynHdy2MbQpikGWcxORSA8vQLQhDRt2VZDobienTA8zLeThzOyAmhPjELxHRHFVT1OOrEoCqUV6wlk8LfhATRlxZGm6lrlZQbqxV_PDM8u7zN0l9XV01Rh0WHO7zZ_Oq0PEeQkf-TC9x7Gl_pOuRyRfGEsrqq-ZEL6AZszxotRKQJO1nNahAhfbNESO2mg
</code></pre>

<p>Example Payload Data for ID Token:</p>

<pre><code class="language-JSON">{
  "sub": "00u5t60iloOHN9pBi0h7",
  "ver": 1,
  "iss": "https://${yourOktaDomain}.com",
  "aud": "0oabskvc6442nkvQO0h7",
  "iat": 1514497781,
  "exp": 1514501381,
  "jti": "ID.kAe1asSO03M0jZtcfGdkiXl0QoKDq9hyw8MUQMT4l-Y",
  "amr": [
    "pwd"
  ],
  "idp": "00o5t60il3UzyIe5v0h7",
  "nonce": "${yourNonceValue}",
  "auth_time": 1514496350,
  "groups": [
    "WestCoastDivision"
  ]
}
</code></pre>

<p>The ID token contains the group WestCoastDivision so the audience (<code class="highlighter-rouge">aud</code>) has access to the group information about the user.</p>

<p>For flows other than implicit, post to the token endpoint <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/oauth2/v1/token</code> with the user or client you want. Make sure the user is assigned to the app and to one of the groups from your whitelist.</p>

<p>If the results aren’t as expected, start your troubleshooting by inspecting the System Log to see what went wrong. Also, try requesting only an ID token instead of both and ID token and access token.</p>

<h3 id="create-a-token-with-groups-claim-custom-authorization-server">Create a Token with Groups Claim (Custom Authorization Server)</h3>

<h4 id="step-one-get-the-group-ids-1">Step One: Get the Group IDs</h4>

<p>Send a request to <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups</code> and collect the IDs for all the groups you’ll want to whitelist.</p>

<p>Request Example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: SSWS ${api_token}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="s2">"<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups"</span>
</code></pre></div></div>

<p>This example uses one <code class="highlighter-rouge">groupId</code> for simplicity’s sake.</p>

<p>Response Example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00gbso71miOMjxHRW0h7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-25T21:15:48.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-25T21:15:48.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastMembershipUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-25T21:16:07.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectClass"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"okta:user_group"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OKTA_GROUP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WestCoastDivision"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Employees West of the Rockies"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://op1static.oktacdn.com/assets/img/logos/groups/okta-medium.d7fb831bc4e7e1a5d8bd35dfaf405d9e.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://op1static.oktacdn.com/assets/img/logos/groups/okta-large.511fcb0de9da185b52589cb14d581c2c.png"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups/00gbso71miOMjxHRW0h7/users"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"apps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/groups/00gbso71miOMjxHRW0h7/apps"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h4 id="step-two--add-list-of-groups-to-profile-of-client-app">Step Two:  Add List of Groups to Profile of Client App</h4>

<p>If you only have one or two groups to specify, simply add the group IDs to the first parameter of the <code class="highlighter-rouge">getFilteredGroups</code> function described in the next step.
However, if you have a lot of groups to whitelist, you can put the group IDs in the client app’s profile property bag: <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/api/v1/apps/:aid</code>.</p>

<p>This example names the group whitelist <code class="highlighter-rouge">groupwhitelist</code>, but you can name it anything.</p>

<p>Request Example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://<span class="o">{</span>yourOktaDomain<span class="o">}</span>.com/api/v1/apps/0oabskvc6442nkvQO0h7 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: SSWS ${api_token}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "oidc_client",
    "label": "Sample Client",
    "status": "ACTIVE",
    "signOnMode": "OPENID_CONNECT",
    "credentials": {
      "oauthClient": {
        "token_endpoint_auth_method": "client_secret_post"
      }
    },
    "settings": {
      "oauthClient": {
        "client_uri": "http://localhost:8080",
        "logo_uri": "http://developer.okta.com/assets/images/logo-new.png",
        "redirect_uris": [
          "https://example.com/oauth2/callback",
          "myapp://callback"
        ],
        "response_types": [
          "token",
          "id_token",
          "code"
        ],
        "grant_types": [
          "implicit",
          "authorization_code"
        ],
        "application_type": "native"
      }
    },
    "profile": {
      "groupwhitelist": [
        "00gbso71miOMjxHRW0h7"
      ]
    }
  }'</span>
</code></pre></div></div>

<p>You can add application groups, user groups or both to the group whitelist, specified as an array of IDs.</p>

<p>To use the group whitelist for every client that gets this claim in a token, put the attribute name of the whitelist in the first parameter of the <code class="highlighter-rouge">getFilteredGroups</code> function described in the next step.</p>

<h4 id="step-three-configure-a-custom-claim-for-your-groups-custom-authorization-server">Step Three: Configure a Custom Claim for Your Groups (Custom Authorization Server)</h4>

<p>Add a custom claim for the ID token or access token on a Custom Authorization Server with the following function:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> getFilteredGroups({app.profile.whitelist}, 
 "{value-to-represent-the-group-in-the-token}", 
 {maximum-number-of-groups-to-include-in-token})
</code></pre></div></div>

<p>The maximum number of groups specified must be less than 100.</p>

<p>In the following two examples for creating the groups claim, the <code class="highlighter-rouge">name</code> for the claim is <code class="highlighter-rouge">groups</code>, but you can name it whatever you wish.</p>

<h5 id="request-example-for-access-token">Request Example for Access Token</h5>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://<span class="o">{</span>yourOktaDomain<span class="o">}</span>.com/api/v1/authorizationServers/ausain6z9zIedDCxB0h7/claims <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: SSWS ${api_token}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
   "name": "groups",
   "status": "ACTIVE",
   "claimType": "RESOURCE",
   "valueType": "EXPRESSION",
   "value": "\"getFilteredGroups(app.profile.groupwhitelist, \"group.name\", 40)\"",
   "conditions": {
     "scopes": []
   }
 }'</span>
</code></pre></div></div>

<h5 id="request-example-for-id-token">Request Example for ID Token</h5>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-X</span> POST <span class="se">\</span>
  https://<span class="o">{</span>yourOktaDomain<span class="o">}</span>.com/api/v1/authorizationServers/ausain6z9zIedDCxB0h7/claims <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'authorization: SSWS ${api_token}'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
   "name": "groups",
   "status": "ACTIVE",
   "claimType": "IDENTITY",
   "valueType": "EXPRESSION",
   "value": "\"getFilteredGroups(app.profile.groupwhitelist, \"group.name\", 40)\"",
   "conditions": {
     "scopes": []
   }
 }'</span>
</code></pre></div></div>

<p>Be sure that you have a policy and rule set up in your Custom Authorization Server or the request in the next step won’t work.</p>

<p>See <a href="/reference/okta_expression_language/#group-functions">group function documentation</a> for more information about specifying groups with <code class="highlighter-rouge">getFilteredGroups</code>.</p>

<p>Now when you mint a token, groups in the <code class="highlighter-rouge">groupwhitelist</code> that also have the user as a member are included in the <code class="highlighter-rouge">groups</code> claim. Test your configuration in the next step.</p>

<h4 id="step-four-send-a-test-request-1">Step Four: Send a Test Request</h4>

<p>To obtain a token with the configured groups claim, send a request for an ID token that includes one of the scopes that the claim is associated with: <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/oauth2/:authorizationServerId/v1/authorize</code>.</p>

<p>Request Example for Custom Authorization Server:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> curl <span class="nt">-X</span> GET <span class="se">\</span>
  <span class="s1">'https://${yourOktaDomain}.com/oauth2/ausain6z9zIedDCxB0h7/v1/authorize?client_id=0oabskvc6442nkvQO0h7
    &amp;response_type=id_token
    &amp;response_mode=fragment
    &amp;scope=groups%20openid
    &amp;redirect_uri=https%3A%2F%2Fexample.com
    &amp;state=myState&amp;nonce=${myNonceValue}'</span> <span class="se">\</span>
</code></pre></div></div>

<blockquote>
  <p>Note:</p>
  <ul>
    <li>In this example, the claim was configured to work with all scopes. If you specify only certain scopes to return the claim, you’ll need to specify one of them in the request.</li>
    <li>To obtain an access token, simply change <code class="highlighter-rouge">response_type=id_token</code> to <code class="highlighter-rouge">response_type='token'</code>.</li>
  </ul>
</blockquote>

<h4 id="step-five-decode-the-jwt-to-verify-1">Step Five: Decode the JWT to Verify</h4>

<p>Decode the JWT in the response to see that the groups are in the token. For example, this JWK contains the group claim:</p>

<pre><code class="language-JSON">eyJraWQiOiJ2U2N0OVJ0R2g5ang5QVFfT05aNEFhM19lZ3YwVlktelJKWTZvbmE5R3o4IiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiIwMHU1dDYwaWxvT0hOOXBCaTBoNyIsInZlciI6MSwiaXNzIjoiaHR0cHM6Ly9teXN0aWNvcnAub2t0YXByZXZpZXcuY29tL29hdXRoMi9hdXNhaW42ejl6SWVkREN4QjBoNyIsImF1ZCI6IjBvYWJza3ZjNjQ0Mm5rdlFPMGg3IiwiaWF0IjoxNTE0NDk3MzQ2LCJleHAiOjE1MTQ1MDA5NDYsImp0aSI6IklELlo1RkhPY1BhUUI3Q3ExeXhkRElIRzhieDd0Y3gxVGxYcFdvZTY4cHpGSDgiLCJhbXIiOlsicHdkIl0sImlkcCI6IjAwbzV0NjBpbDNVenlJZTV2MGg3Iiwibm9uY2UiOiIzODBiNTgwMS05MTYzLTRjNGEtOWMyMS1kNjBhMmEzMzJhNzciLCJhdXRoX3RpbWUiOjE1MTQ0OTYzNTAsIm15Z3JvdXBXaGl0ZWxpc3QiOlsiV2VzdENvYXN0RGl2aXNpb24iXX0.X4_rs_bgmWW5cX6p-fur_EN4-Uf2hz3jZZVUgdBRUX0x64O7wbmuPXGicjfLIMH6HRx7bETPjALNoSjvUrFI1IEHBMVROZQGvAYtB5f5ge6ZvZVNk0B8Coz6h3Y9vLmZGwxOFHR0_bbQQC2j01wKKeFPjznfMxtEuBLkD2DXuF7WkHZSmMG5dp7L9LUpvwfCQ2fv1SYRQ_pRVGIxZK5jh9O2yip4LMANbayDkF0Ud8lbq9CAv3Zz4tG77Cwou87yphnHlPgHDrCRRiEbCoe6Q1l8UIfMC3kfaT2HoyJb6jvA91h89jgRbIvUEfasrLoSwUJQv-sYz302QiQdF8WZAQ
</code></pre>

<p>Example Payload Data for an ID Token:</p>

<pre><code class="language-JSON">{
  "sub": "00u5t60iloOHN9pBi0h7",
  "ver": 1,
  "iss": "<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/oauth2/ausain6z9zIedDCxB0h7",
  "aud": "0oabskvc6442nkvQO0h7",
  "iat": 1514497346,
  "exp": 1514500946,
  "jti": "ID.Z5FHOcPaQB7Cq1yxdDIHG8bx7tcx1TlXpWoe68pzFH8",
  "amr": [
    "pwd"
  ],
  "idp": "00o5t60il3UzyIe5v0h7",
  "nonce": "${myNonceValue}",
  "auth_time": 1514496350,
  "groups": [
    "WestCoastDivision"
  ]
}
</code></pre>

<p>Example Payload Data for an Access Token:</p>

<pre><code class="language-JSON">{
  "aud": "https://{yourOktaDomain}",
  "sub": "annie.jackson@acme.com",
  "iat": 1511983934,
  "exp": 1511987534,
  "cid": "0oabskvc6442nkvQO0h7",
  "uid": "00u5t60iloOHN9pBi0h7",
  "scp": [
    "openid"
  ],
  "groups": [
    "WestCoastDivision"
  ]
}
</code></pre>

<p>The ID token or access token contains the group WestCoastDivision so the audience (<code class="highlighter-rouge">aud</code>) has access to the group information about the user.</p>

<p>For flows other than implicit, post to the token endpoint <code class="highlighter-rouge"><span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/oauth2/:authorizationServerId/v1/token</code> with the user or client you want. Make sure the user is assigned to the app and to one of the groups from your whitelist.</p>

<p>If the results aren’t as expected, start your troubleshooting by inspecting the System Log to see what went wrong. Also, try requesting only an ID token instead of both and ID token and access token.</p>

      </div>
      <div class="TableOfContents TableOfContentsPreload">
        <div class="TableOfContents-item is-level1">
          <script>
                  document.write(document.title.split('|')[0].trim());
          </script>
        </div>
        <div class="TableOfContentsLoader"></div>
      </div><!-- END Page Content -->
    </section><!-- END Page Center w/Sub Nav & Content -->

    <!-- START Footer -->
    <footer class="Footer">
    <div class="Wrap">

        <div class="Row">

            <div class="Column--3 Column--medium-6 Column--xSmall-12">

                <a class="Logo" href="https://www.okta.com/" target="_blank" rel="noopener noreferrer">
                    <img src="https://developer.okta.com/sites/all/themes/developer/images/logo-footer.png" alt="Okta">
                    Visit okta.com
                </a>

            </div>

            <div class="Column--3 Column--medium-12 Column--xSmall-12">

                <h4>Social</h4>
                <ul class="Footer-links Footer-links--social">
                    <li><a class="Footer-links--github" target="_blank" rel="noopener noreferrer" href="http://github.com/oktadeveloper">Github</a></li>
                    <li><a class="Footer-links--twitter" target="_blank" rel="noopener noreferrer" href="http://twitter.com/OktaDev">Twitter</a></li>
                    <li><a class="Footer-links--forum" target="_blank" rel="noopener noreferrer" href="https://devforum.okta.com/">Forum</a></li>
                    <li><a class="Footer-links--rss" target="_blank" rel="noopener noreferrer" href="http://feeds.feedburner.com/OktaBlog">RSS Blog</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>More Info</h4>
                <ul class="Footer-links">
                    <li><a target="_blank" href="https://developer.okta.com/integrate-with-okta/">Integrate with Okta</a></li>
                    <li><a href="/blog/">Blog</a></li>
                    <li><a href="/docs/change-log/">Change Log</a></li>
                    <li><a href="/3rd_party_notices/">3rd Party Notices</a></li>
                </ul>
            </div>

            <div class="Column--3 Column--medium-6 Column--small-12">
                <h4>Contact &amp; Legal</h4>
                <ul class="Footer-links">
                    <li><a href="https://developer.okta.com/contact/">Contact Sales</a></li>
                    <li><a target="_blank" rel="noopener noreferrer" href="mailto:developers@okta.com">Contact Support</a></li>
                    <li><a href="https://developer.okta.com/terms/">Terms &amp; Conditions</a></li>
                    <li><a href="https://developer.okta.com/privacy/">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script type="text/javascript" src="/assets/master-36874fb206f812b2e337a93ccfa9c4872940f73b7c070bba28ed2ed9dfccc380.js"></script>
    <script type="text/javascript" src="/assets/myOkta-911cbafbbe079b7a5522d9cbe15bd2a5f44e1582531e88393934bec69f97696b.js"></script>
    
    
    
    
      <script type="text/javascript" src="/assets/docs-0af8e0751a2375ff1b4d8e8ddf6a1b7ffd864bd473116861d71f541c4859329e.js"></script>
    

    <!-- END Footer -->
  </div>
  <!-- START Post Footer -->
  
  <!-- START Google Tag Manager -->
  <!-- https://support.google.com/tagmanager/answer/6103696?hl=en -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TJ45R6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- END Google Tag Manager -->
  <!-- START Google Remarketing Tag -->
  <script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1006913831;
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
  </script>
  <div style="display:none;"><script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"></script></div>
  <noscript><div style="display:inline;"><img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1006913831/?value=0&amp;guid=ON&amp;script=0"></div></noscript>
  <!-- END Google Remarketing Tag -->
  <!-- START Crazy Egg Tracking -->
  <script type="text/javascript">
    setTimeout(function(){var a=document.createElement("script");
    var b=document.getElementsByTagName("script")[0];
    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0021/9333.js?"+Math.floor(new Date().getTime()/3600000);
    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
  </script>
  <!-- END Crazy Egg Tracking -->

  <!-- END Post Footer -->
</body>
</html>
