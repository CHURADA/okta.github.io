<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
    <meta name="robots" content="noindex">
</head>
<body>
    <h2 id="okta-vuejs-quickstart">Okta Vue.js Quickstart</h2>

<p>This guide will walk you through integrating authentication into a Vue app with Okta by performing these steps:</p>

<ol>
  <li>Add an OpenID Connect Client in Okta</li>
  <li>Install the Okta Vue.js SDK</li>
  <li>Attach Components to Routes</li>
  <li>Use the Access Token</li>
</ol>

<p>At the end of the Vue instructions you can choose your server type to learn more about post-authentication workflows, such as verifying tokens that your Vue application can send to your server.</p>

<blockquote>
  <p>If you would prefer to download a complete sample application instead, please visit <a href="https://github.com/okta/samples-js-vue">Vue Sample Applications for Okta</a> and follow those instructions.</p>
</blockquote>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>If you do not already have a <strong>Developer Edition Account</strong>, you can create one at <a href="https://developer.okta.com/signup/">https://developer.okta.com/signup/</a>.</li>
  <li>If you don’t have a Vue app, or are new to Vue, please start with the <a href="https://github.com/vuejs/vue-cli">Vue CLI</a> guide. It will walk you through the creation of a Vue app, creating <a href="https://router.vuejs.org/en/essentials/getting-started.html">routers</a>, and other Vue.js development essentials.</li>
</ul>

<h2 id="add-an-openid-connect-client-in-okta">Add an OpenID Connect Client in Okta</h2>
<p>In Okta, applications are OpenID Connect clients that can use Okta Authorization servers to authenticate users.  Your Okta Org already has a default authorization server, so you just need to create an OIDC client that will use it.</p>
<ul>
  <li>Log into the Okta Developer Dashboard, click <strong>Applications</strong> then <strong>Add Application</strong>.</li>
  <li>Choose <strong>Single Page App (SPA)</strong> as the platform, then populate your new OpenID Connect application with values suitable for your app. If you are running this locally and using the defaults from the <a href="https://github.com/vuejs/vue-cli">Vue CLI</a>, your <code class="highlighter-rouge">port</code> will be <code class="highlighter-rouge">8080</code>:</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Setting</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>App Name</td>
      <td>My SPA App</td>
    </tr>
    <tr>
      <td>Base URIs</td>
      <td>http://localhost:{port}</td>
    </tr>
    <tr>
      <td>Login redirect URIs</td>
      <td>http://localhost:{port}/implicit/callback</td>
    </tr>
    <tr>
      <td>Grant Types Allowed</td>
      <td>Implicit</td>
    </tr>
  </tbody>
</table>

<p>After you have created the application there are two more values you will need to gather:</p>

<table>
  <thead>
    <tr>
      <th>Setting</th>
      <th>Where to Find</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Client ID</td>
      <td>In the applications list, or on the “General” tab of a specific application.</td>
    </tr>
    <tr>
      <td>Org URL</td>
      <td>On the home screen of the developer dashboard, in the upper right.</td>
    </tr>
  </tbody>
</table>

<p>These values will be used in your Vue application to setup the OpenID Connect flow with Okta.</p>

<h2 id="install-the-okta-vue-sdk">Install the Okta Vue SDK</h2>

<p>You will need to use the <a href="https://github.com/okta/okta-oidc-js/tree/master/packages/okta-vue">Okta Vue SDK</a> library to sign in the user by redirecting to the authorization endpoint on your Okta Org. You can install it via npm:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install @okta/okta-vue <span class="nt">--save</span>
</code></pre></div></div>

<h3 id="configuration">Configuration</h3>
<p>You will need the values from the OIDC client that you created in the previous step to instantiate the middleware. You will also need to know your Okta Org URL, which you can see on the home page of the Okta Developer console.</p>

<p>In your application’s <a href="https://router.vuejs.org/en/essentials/getting-started.html">vue-router</a> configuration, import the <code class="highlighter-rouge">@okta/okta-vue</code> plugin and pass it your OpenID Connect client information:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// router/index.js</span>

<span class="k">import</span> <span class="nx">Auth</span> <span class="k">from</span> <span class="s1">'@okta/okta-vue'</span>

<span class="nx">Vue</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">Auth</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">issuer</span><span class="p">:</span> <span class="s1">'<span class="okta-preview-domain">https://{yourOktaDomain}.com</span>/oauth2/default'</span><span class="p">,</span>
  <span class="na">client_id</span><span class="p">:</span> <span class="s1">'{client_id}'</span><span class="p">,</span>
  <span class="na">redirect_uri</span><span class="p">:</span> <span class="s1">'http://localhost:{port}/implicit/callback'</span><span class="p">,</span>
  <span class="na">scope</span><span class="p">:</span> <span class="s1">'openid profile email'</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="attach-components-to-routes">Attach Components to Routes</h2>

<p>You’ll need to provide these routes in your sample application, so that we can sign the user in and handle the callback from Okta. We will show you how to set these up below using <a href="https://router.vuejs.org/en/essentials/getting-started.html">Vue Router</a>:</p>

<ul>
  <li><code class="highlighter-rouge">/</code>: A default home page to handle basic control of the app.</li>
  <li><code class="highlighter-rouge">/implicit/callback</code>: Handle the response from Okta and store the returned tokens.</li>
</ul>

<h3 id="provide-the-login-and-logout-buttons">Provide the Login and Logout Buttons</h3>
<p>In the relevant location in your application, you will want to provide <code class="highlighter-rouge">Login</code> and <code class="highlighter-rouge">Logout</code> buttons for the user. You can show/hide the correct button by using the <code class="highlighter-rouge">$auth.isAuthenticated()</code> method. For example:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/App.vue</span>

<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"app"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">router</span><span class="o">-</span><span class="nx">link</span> <span class="nx">to</span><span class="o">=</span><span class="s2">"/"</span> <span class="nx">tag</span><span class="o">=</span><span class="s2">"button"</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'home-button'</span><span class="o">&gt;</span> <span class="nx">Home</span> <span class="o">&lt;</span><span class="sr">/router-link</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s1">'authenticated'</span> <span class="nx">v</span><span class="o">-</span><span class="nx">on</span><span class="p">:</span><span class="nx">click</span><span class="o">=</span><span class="s1">'logout'</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'logout-button'</span><span class="o">&gt;</span> <span class="nx">Logout</span> <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">v</span><span class="o">-</span><span class="k">else</span> <span class="nx">v</span><span class="o">-</span><span class="nx">on</span><span class="p">:</span><span class="nx">click</span><span class="o">=</span><span class="s1">'$auth.loginRedirect'</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'login-button'</span><span class="o">&gt;</span> <span class="nx">Login</span> <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">router</span><span class="o">-</span><span class="nx">view</span><span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'app'</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">authenticated</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">created</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">()</span>
  <span class="p">},</span>
  <span class="na">watch</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// Everytime the route changes, check for auth status</span>
    <span class="s1">'$route'</span><span class="p">:</span> <span class="s1">'isAuthenticated'</span>
  <span class="p">},</span>
  <span class="na">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="k">async</span> <span class="nx">isAuthenticated</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">authenticated</span> <span class="o">=</span> <span class="kr">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">$auth</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">()</span>
    <span class="p">},</span>
    <span class="k">async</span> <span class="nx">logout</span> <span class="p">()</span> <span class="p">{</span>
      <span class="kr">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">$auth</span><span class="p">.</span><span class="nx">logout</span><span class="p">()</span>
      <span class="kr">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">isAuthenticated</span><span class="p">()</span>

      <span class="c1">// Navigate back to home</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/'</span> <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<h3 id="create-the-callback-handler">Create the Callback Handler</h3>
<p>In order to handle the redirect back from Okta, you need to capture the token values from the URL. You’ll use <code class="highlighter-rouge">/implicit/callback</code> as the callback URL, and use the default <code class="highlighter-rouge">Auth.handleCallback()</code> component included.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// router/index.js</span>

<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="na">mode</span><span class="p">:</span> <span class="s1">'history'</span><span class="p">,</span>
  <span class="na">routes</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/implicit/callback'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">Auth</span><span class="p">.</span><span class="nx">handleCallback</span><span class="p">()</span> <span class="p">},</span>
    <span class="p">...</span>
  <span class="p">]</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="use-the-access-token">Use the Access Token</h2>

<p>When your users are authenticated, your Vue application has an access token that was issued by your Okta Authorization server. You can use this token to authenticate requests for resources on your server or API. As a hypothetical example, let’s say you have an API that provides messages for a user. You could create a <code class="highlighter-rouge">MessageList</code> component that gets the access token and uses it to make an authenticated request to your server.</p>

<p>Here is what the Vue component could look like for this hypothetical example using <a href="https://github.com/axios/axios">axios</a>:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/components/MessageList.vue</span>

<span class="o">&lt;</span><span class="nx">template</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">ul</span> <span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">"posts &amp;&amp; posts.length"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">li</span> <span class="nx">v</span><span class="o">-</span><span class="k">for</span><span class="o">=</span><span class="s2">"post in posts"</span> <span class="p">:</span><span class="nx">key</span><span class="o">=</span><span class="s1">'post.title'</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;&lt;</span><span class="nx">strong</span><span class="o">&gt;</span><span class="p">{{</span><span class="nx">post</span><span class="p">.</span><span class="nx">title</span><span class="p">}}</span><span class="o">&lt;</span><span class="sr">/strong&gt;&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{{</span><span class="nx">post</span><span class="p">.</span><span class="nx">body</span><span class="p">}}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/ul</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/template</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="s1">'axios'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">data</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">posts</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="nx">created</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">axios</span><span class="p">.</span><span class="nx">defaults</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">common</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="kr">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">$auth</span><span class="p">.</span><span class="nx">getAccessToken</span><span class="p">()}</span><span class="s2">`</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`http://localhost:{serverPort}/api/messages`</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">posts</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">`Errors! </span><span class="p">${</span><span class="nx">e</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<p>In the next section you can select your server technology to see how your server can read this incoming token and validate it.</p>


</body>
</html>
